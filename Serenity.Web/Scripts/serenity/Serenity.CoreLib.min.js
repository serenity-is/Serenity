var __decorate=this&&this.__decorate||function(t,e,n,i){var r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)if(o=t[s])a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a;return r>3&&a&&Object.defineProperty(e,n,a),a};var __extends=this&&this.__extends||function(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n];function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)};var Q;(function(t){function e(t,e){return ss.coalesce(t,e)}t.coalesce=e;function n(t){return ss.isValue(t)}t.isValue=n;function i(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}var r,a,o,s,l,u,f=arguments[0]||{},c=1,d=arguments.length;if(typeof f!=="object"&&!$.isFunction(f)){f={}}if(c===d){f={};c=0}for(;c<d;c++){if((r=arguments[c])!==null){if($.isArray(r)){f=$.extend(true,[],r)}else{for(a in r){o=f[a];s=r[a];if(f===s){continue}if(s&&($.isPlainObject(s)||(l=$.isArray(s)))){if(l){l=false;u=o&&$.isArray(o)?o:[]}else{u=o&&$.isPlainObject(o)?o:{}}f[a]=i(u,s)}else if(s!==undefined){f[a]=s}}}}}return f}t.deepClone=i})(Q||(Q={}));var Q;(function(t){function e(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e(r))return true}return false}t.any=e;function n(t,e){var n=0;for(var i=0,r=t;i<r.length;i++){var a=r[i];if(e(a))n++}return n}t.count=n;function i(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e(r))return r}throw new Error("first:No element satisfies the condition.!")}t.first=i;function r(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}t.indexOf=r;function a(t,e,n){ss.insert(t,e,n)}t.insert=a;function o(t){return ss.isArray(t)}t.isArray=o;function s(t,e){var n;var i=false;for(var r=0,a=t;r<a.length;r++){var o=a[r];if(e(o)){if(i)throw new Error("single:sequence contains more than one element.");i=true;n=o}}if(!i)throw new Error("single:No element satisfies the condition.");return n}t.single=s;function l(t,e){var n={};for(var i=0,r=t;i<r.length;i++){var a=r[i];var o=e(a)||"";var s=n[o];if(!s){s=n[o]=[]}s.push(a)}return n}t.toGrouping=l;function u(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(e(r))return r}}t.tryFirst=u})(Q||(Q={}));var Q;(function(t){function e(t,e){return ss.endsWithString(t,e)}t.endsWith=e;function n(t){return t==null||t.length===0}t.isEmptyOrNull=n;function i(t){return f(t)==null}t.isTrimmedEmpty=i;function r(t){var e=[];for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n]}return(i=ss).formatString.apply(i,[t].concat(e));var i}t.format=r;function a(t,e,n){if(n===void 0){n=" "}while(t.length<e)t="0"+t;return t}t.padLeft=a;function o(t,e){return ss.startsWithString(t,e)}t.startsWith=o;function s(e){return t.replaceAll(t.replaceAll(u(e),"\r\n"," "),"\n"," ").trim()}t.toSingleLine=s;function l(t){return(t==null?"":t).replace(new RegExp("^\\s+|\\s+$","g"),"")}t.trim=l;function u(t){if(t==null||t.length===0){return""}return l(t)}t.trimToEmpty=u;function f(t){if(t==null||t.length===0){return null}t=l(t);if(t.length===0){return null}else{return t}}t.trimToNull=f;var c;function d(t,e){var n="AaBbCcÇçFfGgĞğHhIıİiJjKkLlMmNnOoÖöPpRrSsŞşTtUuÜüVvYyZz";t=t||"";e=e||"";if(t==e)return 0;if(!c){c={};for(var i=0;i<n.length;i++){c[n.charAt(i)]=i+1}}for(var r=0,a=Math.min(t.length,e.length);r<a;r++){var o=t.charAt(r),s=e.charAt(r);if(o===s)continue;var l=c[o],u=c[s];if(l!=null&&u!=null)return l<u?-1:1;var f=o.localeCompare(s);if(f==0)continue;return f}return t.localeCompare(e)}t.turkishLocaleCompare=d;function g(t){if(!t)return t;return t.replace(/i/g,"İ").replace(/ı/g,"I").toUpperCase()}t.turkishLocaleToUpper=g;function p(t,e,n){return ss.replaceAllString(t,e,n)}t.replaceAll=p;function h(t,e){var n=t.toString();while(n.length<e)n="0"+n;return n}t.zeroPad=h})(Q||(Q={}));var Q;(function(t){var e;(function(e){e.decimalSeparator=".";e.dateSeparator="/";e.dateOrder="dmy";e.dateFormat="dd/MM/yyyy";e.dateTimeFormat="dd/MM/yyyy HH:mm:ss";function n(){return e.decimalSeparator===","?".":","}e.get_groupSeperator=n;var i=t.trimToNull($("script#ScriptCulture").html());if(i!=null){var r=$.parseJSON(i);if(r.DecimalSeparator!=null)e.decimalSeparator=r.DecimalSeparator;if(r.DateSeparator!=null)e.dateSeparator=r.DateSeparator;if(r.DateOrder!=null)e.dateOrder=r.DateOrder;if(r.DateFormat!=null)e.dateFormat=r.DateFormat;if(r.DateTimeFormat!=null)e.dateTimeFormat=r.DateTimeFormat}})(e=t.Culture||(t.Culture={}))})(Q||(Q={}));var Q;(function(t){function e(e,n,i,r){var o="-";if(isNaN(e)){return null}i=i||t.Culture.decimalSeparator;r=r||t.Culture.get_groupSeperator();var s="";if(n.indexOf(".")>-1){var l=i;var u=n.substring(n.lastIndexOf(".")+1);e=a(e,u.length);var f=e%1;var c=new String(f.toFixed(u.length));c=c.substring(c.lastIndexOf(".")+1);for(var d=0;d<u.length;d++){if(u.charAt(d)=="#"&&c.charAt(d)!="0"){l+=c.charAt(d);continue}else if(u.charAt(d)=="#"&&c.charAt(d)=="0"){var g=c.substring(d);if(g.match("[1-9]")){l+=c.charAt(d);continue}else break}else if(u.charAt(d)=="0")l+=c.charAt(d);else l+=u.charAt(d)}s+=l}else e=Math.round(e);var p=Math.floor(e);if(e<0)p=Math.ceil(e);var h="";if(n.indexOf(".")==-1)h=n;else h=n.substring(0,n.indexOf("."));var v="";if(!(p==0&&h.substr(h.length-1)=="#")){var m=new String(Math.abs(p));var y=9999;if(h.lastIndexOf(",")!=-1)y=h.length-h.lastIndexOf(",")-1;var b=0;for(var d=m.length-1;d>-1;d--){v=m.charAt(d)+v;b++;if(b==y&&d!=0){v=r+v;b=0}}if(h.length>v.length){var w=h.indexOf("0");if(w!=-1){var C=h.length-w;var _=h.length-v.length-1;while(v.length<C){var x=h.charAt(_);if(x==",")x=r;v=x+v;_--}}}}if(!v&&h.indexOf("0",h.length-1)!==-1)v="0";s=v+s;if(e<0)s=o+s;if(s.lastIndexOf(i)==s.length-1){s=s.substring(0,s.length-1)}return s}t.formatNumber=e;var n=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function i(e){e=t.trim(e.toString());var n=t.Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(n)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+n+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!/^[-\+]?\d+$/.test(e))return NaN;return parseInt(e,10)}t.parseInteger=i;function r(e){if(e==null)return null;e=t.trim(e.toString());if(e.length==0)return null;var n=t.Culture.get_groupSeperator();if(e&&e.length&&e.indexOf(n)>0){e=e.replace(new RegExp("(\\b\\d{1,3})\\"+n+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!new RegExp("^\\s*([-\\+])?(\\d*)\\"+t.Culture.decimalSeparator+"?(\\d*)\\s*$").test(e))return NaN;return parseFloat(e.toString().replace(t.Culture.decimalSeparator,"."))}t.parseDecimal=r;function a(t,e){var n=Math.pow(10,e||0);var i=(Math.round(t*n)/n).toString();if(e>0){var r=i.indexOf(".");if(r==-1){i+=".";r=0}else{r=i.length-(r+1)}while(r<e){i+="0";r++}}return parseFloat(i)}function o(t){if(t==null)return null;if(typeof t=="number")return t;t=$.trim(t);if(t==null||!t.length)return null;if(t.length>=15||!/^\d+$/.test(t))return t;var e=parseInt(t,10);if(isNaN(e))return t;return e}t.toId=o})(Q||(Q={}));var Q;(function(t){function e(e,n){if(!e){return""}if(n==null){n=t.Culture.dateFormat}var i=function(e){return t.zeroPad(e,2)};return n.replace(new RegExp("dd?|MM?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|fff|zz?z?|\\/","g"),function(n){switch(n){case"/":return t.Culture.dateSeparator;case"hh":return i(e.getHours()<13?e.getHours():e.getHours()-12);case"h":return e.getHours()<13?e.getHours():e.getHours()-12;case"HH":return i(e.getHours());case"H":return e.getHours();case"mm":return i(e.getMinutes());case"m":return e.getMinutes();case"ss":return i(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return e.getFullYear();case"yy":return e.getFullYear().toString().substr(2,4);case"dd":return i(e.getDate());case"d":return e.getDate().toString();case"MM":return i(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.getHours()<12?"A":"P";case"tt":return e.getHours()<12?"AM":"PM";case"fff":return t.zeroPad(e.getMilliseconds(),3);case"zzz":case"zz":case"z":return"";default:return n}})}t.formatDate=e;function n(e){if(e===0)return"0";else if(!e)return"";var n=Math.floor(e/24/60);var i="";if(n>0){i+=n.toString()}var r=t.zeroPad(Math.floor(e%(24*60)/60),2)+":"+t.zeroPad(e%60,2);if(r!="00:00"){if(n>0)i+=".";i+=r}return i}t.formatDayHourAndMin=n;function i(t){if(t==null)return"";var e=function(t){return(t<10?"0":"")+t};var n=t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes());var i=Number(t.getUTCSeconds()+"."+(t.getUTCMilliseconds()<100?"0":"")+e(t.getUTCMilliseconds()));n+=":"+e(i)+"Z";return n}t.formatISODateTimeUTC=i;var r=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function a(t){if(!t||!t.length)return null;var e=Date.parse(t);if(!isNaN(e)&&typeof e=="Date")return e;t=t+"";if(typeof t!="string"||t.length===0){return null}var n=t.match(r);if(typeof n=="undefined"||n===null){return null}var i,a,o,s,l,u,f;i=parseInt(n[1],10);if(typeof n[2]=="undefined"||n[2]===""){return new Date(i)}a=parseInt(n[2],10)-1;o=parseInt(n[3],10);if(typeof n[4]=="undefined"||n[4]===""){return new Date(i,a,o)}s=parseInt(n[4],10);l=parseInt(n[5],10);u=typeof n[6]!="undefined"&&n[6]!==""?parseInt(n[6],10):0;if(typeof n[7]!="undefined"&&n[7]!==""){f=Math.round(1e3*parseFloat("0."+n[7]))}else{f=0}if((typeof n[8]=="undefined"||n[8]==="")&&(typeof n[9]=="undefined"||n[9]==="")){return new Date(i,a,o,s,l,u,f)}var c;if(typeof n[9]!="undefined"&&n[9]!==""){c=parseInt(n[10],10)*36e5;if(typeof n[11]!="undefined"&&n[11]!==""){c+=parseInt(n[11],10)*6e4}if(n[9]=="-"){c=-c}}else{c=0}return new Date(Date.UTC(i,a,o,s,l,u,f)-c)}t.parseISODateTime=a;function o(e){var n=t.trim(e);if(n.length<4||n.length>5)return NaN;var i,r;if(n.charAt(1)==":"){i=t.parseInteger(n.substr(0,1));r=t.parseInteger(n.substr(2,2))}else{if(n.charAt(2)!=":")return NaN;i=t.parseInteger(n.substr(0,2));r=t.parseInteger(n.substr(3,2))}if(isNaN(i)||isNaN(r)||i<0||i>23||r<0||r>59)return NaN;return i*60+r}t.parseHourAndMin=o;function s(e){var n;var i=t.trim(e);if(!i)return NaN;var r=i.split(".");if(r.length==0||r.length>2)return NaN;if(r.length==1){n=t.parseInteger(r[0]);if(!isNaN(n))return n*24*60;return o(r[0])}else{n=t.parseInteger(r[0]);var a=o(r[1]);if(isNaN(n)||isNaN(a))return NaN;return n*24*60+a}}t.parseDayHourAndMin=s;function l(e,n){if(!e||!e.length)return null;var i;var r;var a,o,s;r=u(e);if(!r)return false;if(r.length==3){n=n||t.Culture.dateOrder;switch(n){case"dmy":a=parseInt(r[0],10);o=parseInt(r[1],10)-1;s=parseInt(r[2],10);break;case"ymd":a=parseInt(r[2],10);o=parseInt(r[1],10)-1;s=parseInt(r[0],10);break;case"mdy":default:a=parseInt(r[1],10);o=parseInt(r[0],10)-1;s=parseInt(r[2],10);break}if(isNaN(a)||isNaN(o)||isNaN(s)||a<1||a>31||o<0||o>11||s>9999||s<0)return false;if(s<100){var l=(new Date).getFullYear();var f=l%100+10;s+=l-l%100+(s<=f?0:-100)}try{i=new Date(s,o,a);if(isNaN(i.getFullYear()))return false}catch(c){return false}}else if(r.length==1){try{i=new Date(r[0]);if(isNaN(i.getFullYear()))return false}catch(c){return false}}return i}t.parseDate=l;function u(e){e=t.trim(e);if(!e.length)return;if(e.indexOf("/")>=0)return e.split("/");else if(e.indexOf(".")>=0)return e.split(".");else if(e.indexOf("-")>=0)return e.split("-");else if(e.indexOf("\\")>=0)return e.split("\\");else return[e]}t.splitDateString=u})(Q||(Q={}));var Q;(function(t){function e(t){var e=i.$table[t];if(e==null){e=t||""}return e}t.text=e;function n(t){return i.$table[t]}t.tryGetText=n;var i=function(){function t(t){this.key=t}t.add=function(e,n){if(!e){return}n=n||"";for(var i=0,r=Object.keys(e);i<r.length;i++){var a=r[i];var o=n+a;var s=e[a];if(typeof s==="object"){t.add(s,o+".")}else{t.$table[o]=s}}};t.prototype.get=function(){var e=t.$table[this.key];if(e==null){e=this.key||""}return e};t.prototype.toString=function(){var e=t.$table[this.key];if(e==null){e=this.key||""}return e};t.$table={};t.empty=new t("");t.initializeTextClass=function(e,n){var i=Object.keys(e).slice();for(var r=0;r<i.length;r++){var a=i[r];var o=e[a];if(o instanceof t){var s=o;var l=n+a;t.$table[l]=s.$key;e[a]=new t(l)}}};t.getDefault=function(e,n){var i=t.$table[e];if(i==null){i=n;if(i==null){i=e||""}}return i};return t}();t.LT=i})(Q||(Q={}));var Q;(function(t){var e=function(){function e(t,e){this.items=[];this.itemById={};t=t||{};this.textFormatter=t.textFormatter;this.idField=t.idField;this.parentIdField=t.parentIdField;this.textField=t.textField;this.textFormatter=t.textFormatter;if(e!=null)this.update(e)}e.prototype.update=function(e){this.items=[];this.itemById={};if(e){for(var n=0,i=e;n<i.length;n++){var r=i[n];this.items.push(r)}}var a=this.idField;if(!t.isEmptyOrNull(a)){for(var o=0,s=this.items;o<s.length;o++){var l=s[o];var u=l[a];if(u!=null){this.itemById[u]=l}}}};e.prototype.get_idField=function(){return this.idField};e.prototype.get_parentIdField=function(){return this.parentIdField};e.prototype.get_textField=function(){return this.textField};e.prototype.get_textFormatter=function(){return this.textFormatter};e.prototype.get_itemById=function(){return this.itemById};e.prototype.get_items=function(){return this.items};return e}();t.Lookup=e})(Q||(Q={}));var Q;(function(t){var e=0;function n(t){if(e>0){e++;return}$.blockUI(t);e++}function i(t){t=$.extend({baseZ:2e3,message:"",overlayCSS:{opacity:"0.0",zIndex:2e3,cursor:"wait"},fadeOut:0},t);if(t.useTimeout){window.setTimeout(function(){n(t)},0)}else{n(t)}}t.blockUI=i;function r(){if(e>1){e--;return}e--;$.unblockUI({fadeOut:0})}t.blockUndo=r})(Q||(Q={}));var Q;(function(t){function e(t,e,n){$("<option/>").val(e).text(n).appendTo(t)}t.addOption=e;function n(n){e(n,"",t.text("Controls.SelectEditor.EmptyItemText"))}t.addEmptyOption=n;function i(t){t.html("")}t.clearOptions=i;function r(e,n){var i=e.attr("id");if(t.isEmptyOrNull(i)){return $("#"+n)}var r=$(i+n);if(r.length>0){return r}r=$(i+"_"+n);if(r.length>0){return r}while(true){var a=i.lastIndexOf("_");if(a<=0){return $("#"+n)}i=i.substr(0,a);r=$("#"+i+"_"+n);if(r.length>0){return r}}}t.findElementWithRelativeId=r;function a(t){switch(t){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;"}return t}function o(t){var e=t==null?"":t.toString();if(new RegExp("[><&]","g").test(e)){return e.replace(new RegExp("[><&]","g"),a)}return e}t.htmlEncode=o;function s(e,n){if(!e||e.indexOf("{{")<0){return e}if(!$.templates||!$.views){throw new ss.Exception("Please make sure that jsrender.js is included in the page!")}n=n||{};var i=$.templates(e);$.views.converters({text:t.text},i);return i.render(n)}t.jsRender=s;function l(t){window.console&&window.console.log(t)}t.log=l;function u(){return $("<div/>").appendTo(document.body)}t.newBodyDiv=u;function f(t){return $("<i/>").append(t.eq(0).clone()).html()}t.outerHtml=f})(Q||(Q={}));var Q;(function(t){function e(e,n){var i;n=$.extend({htmlEncode:true,okButton:t.text("Dialogs.OkButton"),title:t.text("Dialogs.AlertTitle"),onClose:null,onOpen:null,autoOpen:false,dialogClass:"s-MessageDialog s-AlertDialog",modal:true,width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(n.onOpen)n.onOpen.call(this)},close:function(){i.dialog("destroy");if(n.onClose)n.onClose()}},n);if(n.htmlEncode)e=t.htmlEncode(e);if(!n.buttons){var r=[];r.push({text:n.okButton,click:function(){i.dialog("close")}});n.buttons=r}i=$('<div><div class="message"></div></div>').dialog(n).children(".message").html(e).parent().dialog("open")}t.alert=e;function n(e,n,i){var r;i=$.extend({htmlEncode:true,yesButton:t.text("Dialogs.YesButton"),noButton:t.text("Dialogs.NoButton"),title:t.text("Dialogs.ConfirmationTitle"),onNo:null,onCancel:null,onClose:null,autoOpen:false,modal:true,dialogClass:"s-MessageDialog s-ConfirmDialog",width:"40%",maxWidth:"450",minWidth:"180",resizable:false,open:function(){if(i.onOpen)i.onOpen.call(this)},close:function(){r.dialog("destroy");if(!a&&i.onCancel)i.onCancel()},overlay:{opacity:.77,background:"black"}},i);if(i.htmlEncode)e=t.htmlEncode(e);var a=false;if(!i.buttons){var o=[];o.push({text:i.yesButton,click:function(){a=true;r.dialog("close");if(n)n()}});if(i.noButton)o.push({text:i.noButton,click:function(){a=true;r.dialog("close");if(i.onNo)i.onNo();else if(i.onCancel)i.onCancel()}});i.buttons=o}r=$('<div><div class="message"></div></div>').dialog(i).children(".message").html(e).parent().dialog("open")}t.confirm=n;function i(e){var n;var i=$("<div><iframe></iframe></div>");var r=$.extend({autoOpen:true,modal:true,width:"60%",height:"400",title:t.text("Dialogs.AlertTitle"),open:function(){n=i.find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;n.open();n.write(r.html);n.close()},close:function(){n.open();n.write("");n.close();i.dialog("destroy").html("")}},e);i.dialog(r)}t.iframeDialog=i;function r(e,i,r){n(e,i,$.extend({title:t.text("Dialogs.InformationTitle"),dialogClass:"s-MessageDialog s-InformationDialog",yesButton:t.text("Dialogs.OkButton"),noButton:null},r))}t.information=r;function a(n,i){e(n,$.extend({title:t.text("Dialogs.WarningTitle"),dialogClass:"s-MessageDialog s-WarningDialog"},i))}t.warning=a})(Q||(Q={}));var Q;(function(t){t.defaultNotifyOptions={timeOut:3e3,showDuration:250,hideDuration:500,extendedTimeOut:500,positionClass:"toast-top-full-width"};function e(e){e=$.extend({},t.defaultNotifyOptions,e);o(true);return e}function n(t,n,i){toastr.warning(t,n,e(i))}t.notifyWarning=n;function i(t,n,i){toastr.success(t,n,e(i))}t.notifySuccess=i;function r(t,n,i){toastr.info(t,n,e(i))}t.notifyInfo=r;function a(t,n,i){toastr.error(t,n,e(i))}t.notifyError=a;function o(t){if(typeof toastr==="undefined"){return}var e=$(window.document.body).children(".ui-dialog:visible").last();var n=toastr.getContainer(null,t);if(n.length===0){return}if(e.length>0){var i=e.position();n.addClass("positioned-toast toast-top-full-width");n.css({position:"absolute",top:i.top+28+"px",left:i.left+6+"px",width:e.width()-12+"px"})}else{n.addClass("toast-top-full-width");if(n.hasClass("positioned-toast")){n.removeClass("positioned-toast");n.css({position:"",top:"",left:"",width:""})}}}t.positionToastContainer=o})(Q||(Q={}));var Q;(function(t){var e;(function(t){t.applicationPath="/";var e=$("link#ApplicationPath");if(e.length>0){t.applicationPath=e.attr("href")}t.emailAllowOnlyAscii=true;t.responsiveDialogs=false;t.rootNamespaces=["Serenity"];t.notLoggedInHandler=null})(e=t.Config||(t.Config={}))})(Q||(Q={}));var Q;(function(t){function e(t){var e;if(t===undefined)e=location.search.substring(1,location.search.length);else e=t||"";var n={};var i=e.split("&");for(var r=0;r<i.length;r++){var a=i[r].split("=");var o=decodeURIComponent(a[0]);n[o]=a.length>=2?decodeURIComponent(a[1]):o}return n}t.parseQueryString=e;function n(t){var e=$("<form/>").attr("method","POST").attr("action",t.url?r(t.url):r("~/services/"+t.service)).appendTo(document.body);if(t.target)e.attr("target",t.target);var n=$("<div/>").appendTo(e);$("<input/>").attr("type","hidden").attr("name","request").val($["toJSON"](t.request)).appendTo(n);$("<input/>").attr("type","submit").appendTo(n);e.submit();window.setTimeout(function(){e.remove()},0)}t.postToService=n;function i(t){var e=$("<form/>").attr("method","POST").attr("action",r(t.url)).appendTo(document.body);if(t.target)e.attr("target",t.target);var n=$("<div/>").appendTo(e);if(t.params!=null){for(var i in t.params){$("<input/>").attr("type","hidden").attr("name",i).val(t.params[i]).appendTo(n)}}$("<input/>").attr("type","submit").appendTo(n);e.submit();window.setTimeout(function(){e.remove()},0)}t.postToUrl=i;function r(e){if(e&&e.substr(0,2)==="~/"){return t.Config.applicationPath+e.substr(2)}return e}t.resolveUrl=r})(Q||(Q={}));var Q;(function(t){var e;(function(e){function n(e){var n;if(e==null){n="??ERROR??"}else{n=e.Message;if(n==null){n=e.Code}}t.alert(n)}e.showServiceError=n})(e=t.ErrorHandling||(t.ErrorHandling={}))})(Q||(Q={}));var Q;(function(t){function e(e){var n=function(n){if(t.Config.notLoggedInHandler!=null&&n&&n.Error&&t.Config.notLoggedInHandler(e,n)){return}if(e.onError!=null){e.onError(n);return}t.ErrorHandling.showServiceError(n.Error)};var i=e.service;if(i&&i.length&&i.charAt(0)!="~"&&i.charAt(0)!="/"&&i.indexOf("://")<0)i=t.resolveUrl("~/services/")+i;e=$.extend({dataType:"json",contentType:"application/json",type:"POST",cache:false,blockUI:true,url:i,data:$.toJSON(e.request),success:function(n,i,r){try{if(!n.Error&&e.onSuccess){e.onSuccess(n)}}finally{if(e.blockUI){t.blockUndo()}e.onCleanup&&e.onCleanup()}},error:function(i,r,a){try{if(i.status===403){var o=null;try{o=i.getResponseHeader("Location")}catch(s){o=null}if(o){window.top.location.href=o;return}}if((i.getResponseHeader("content-type")||"").toLowerCase().indexOf("application/json")>=0){var l=$.parseJSON(i.responseText);if(l&&l.Error){n(l);return}}var u=i.responseText;t.iframeDialog({html:u})}finally{if(e.blockUI){t.blockUndo()}e.onCleanup&&e.onCleanup()}}},e);if(e.blockUI){t.blockUI(null)}return $.ajax(e)}t.serviceCall=e;function n(t,n,i,r){return e($.extend({service:t,request:n,onSuccess:i},r))}t.serviceRequest=n;function i(t,e,n){if(t.EqualityFilter==null){t.EqualityFilter={}}t.EqualityFilter[e]=n}t.setEquality=i})(Q||(Q={}));var Q;(function(t){function e(t){$("body").addClass("full-height-page");var e=function(){var e;try{e=parseInt($(".page-content").css("min-height")||"0")-parseInt($(".page-content").css("padding-top")||"0")-parseInt($(".page-content").css("padding-bottom")||"0")}catch(n){e=100}t(e)};if(window.Metronic){window.Metronic.addResizeHandler(e)}else{$(window).resize(e)}e()}t.addFullHeightResizeHandler=e;function n(t){t.css("height","100%");s(t)}t.autoFullHeight=n;function i(t){$("body").addClass("full-height-page");t.addClass("responsive-height");var e=function(){var e=t.parent().hasClass("page-content")||t.parent().is("section.content");if(e){t.css("height","1px").css("overflow","hidden")}a(t);if(e){t.css("overflow","")}t.triggerHandler("layout")};if($("body").hasClass("has-layout-event")){$("body").bind("layout",e)}else if(window.Metronic){window.Metronic.addResizeHandler(e)}else{$(window).resize(e)}e()}t.initFullHeightGridPage=i;function r(t){var e=0;t.parent().children().not(t).each(function(t,n){var i=$(n);if(i.is(":visible")){e+=i.outerHeight(true)}});e=t.parent().height()-e;if(t.css("box-sizing")!=="border-box"){e=e-(t.outerHeight(true)-t.height())}return e}t.layoutFillHeightValue=r;function a(t){var e=r(t);var n=e+"px";if(t.css("height")!=n){t.css("height",n)}}t.layoutFillHeight=a;function o(){var t=navigator.userAgent.indexOf("Mobi")>=0||window.matchMedia("(max-width: 767px)").matches;var e=$(document.body);if(e.hasClass("mobile-device")){if(!t){e.removeClass("mobile-device")}}else if(t){e.addClass("mobile-device")}}t.setMobileDeviceMode=o;function s(t){Serenity.LazyLoadHelper.executeEverytimeWhenShown(t,function(){t.triggerHandler("layout")},true)}t.triggerLayoutOnShow=s;function l(t){if(!t.hasClass("ui-dialog"))t=t.closest(".ui-dialog");t.position({at:"center center",of:window});var e=t.position();if(e.left<0)t.css("left","0px");if(e.top<0)t.css("top","0px")}t.centerDialog=l})(Q||(Q={}));var Q;(function(t){var e;(function(e){var n={};var i={};function r(t,e,n){$(document.body).bind("scriptdatachange."+e,function(e,i){if(i==t){n()}})}e.bindToChange=r;function a(t){$(document.body).triggerHandler("scriptdatachange",[t])}e.triggerChange=a;function o(t){$(document.body).unbind("scriptdatachange."+t)}e.unbindFromChange=o;function s(t){$.ajax({async:false,cache:true,type:"GET",url:t,data:null,dataType:"script"})}function l(e){return RSVP.resolve().then(function(){t.blockUI(null);return RSVP.resolve($.ajax({async:true,cache:true,type:"GET",url:e,data:null,dataType:"script"}).always(function(){t.blockUndo()}))},null)}function u(e){if(n[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}e=e+".js?"+n[e];s(t.resolveUrl("~/DynJS.axd/")+e)}function f(e){return RSVP.resolve().then(function(){if(n[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}e=e+".js?"+n[e];return l(t.resolveUrl("~/DynJS.axd/")+e)},null)}function c(e){var n=i[e];if(n==null){u(e)}n=i[e];if(n==null)throw new Error(t.format("Can't load script data: {0}!",e));return n}e.ensure=c;function d(e){return RSVP.resolve().then(function(){var n=i[e];if(n!=null){return RSVP.resolve(n)}return f(e).then(function(){n=i[e];if(n==null){throw new Error(t.format("Can't load script data: {0}!",e))}return n},null)},null)}e.ensureAsync=d;function g(e){if(n[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}n[e]=(new Date).getTime().toString();u(e);var r=i[e];return r}e.reload=g;function p(e){return RSVP.resolve().then(function(){if(n[e]==null){throw new Error(t.format("Script data {0} is not found in registered script list!",e))}n[e]=(new Date).getTime().toString();return f(e).then(function(){return i[e]},null)},null)}e.reloadAsync=p;function h(t){return i[t]!=null||n[t]!=null}e.canLoad=h;function v(t){n={};for(var e in t){n[e]=t[e].toString()}}e.setRegisteredScripts=v;function m(t,e){i[t]=e;a(t)}e.set=m})(e=t.ScriptData||(t.ScriptData={}));function n(t){return e.ensure("RemoteData."+t)}t.getRemoteData=n;function i(t){return e.ensureAsync("RemoteData."+t)}t.getRemoteDataAsync=i;function r(t){return e.ensure("Lookup."+t)}t.getLookup=r;function a(t){return e.ensureAsync("Lookup."+t)}t.getLookupAsync=a;function o(t){e.reload("Lookup."+t)}t.reloadLookup=o;function s(t){return e.reloadAsync("Lookup."+t)}t.reloadLookupAsync=s;function l(t){return e.ensure("Columns."+t)}t.getColumns=l;function u(t){return e.ensureAsync("Columns."+t)}t.getColumnsAsync=u;function f(t){return e.ensure("Form."+t)}t.getForm=f;function c(t){return e.ensureAsync("Form."+t)}t.getFormAsync=c;function d(t){return e.ensure("Template."+t)}t.getTemplate=d;function g(t){return e.ensureAsync("Template."+t)}t.getTemplateAsync=g;function p(t){return e.canLoad(t)}t.canLoadScriptData=p})(Q||(Q={}));var Q;(function(t){function e(t,e,n,i){n=n||"get_"+e;i=i||"set_"+e;Object.defineProperty(t.prototype,e,{get:function(){return this[n]()},set:function(t){return this[i](t)},configurable:true,enumerable:true})}t.prop=e;function n(t,e,n){function i(t,e,r){if(!t)return;if($.isArray(t)||t instanceof Date)return;var a=typeof t;if(a=="string"||a=="number")return;if($.isFunction(t)||t.__enum&&t.__register)n(t,e);if(r>3)return;for(var o=0,s=Object.keys(t);o<s.length;o++){var l=s[o];if(l.charAt(0)<"A"||l.charAt(0)>"Z")continue;if(l.indexOf("$")>=0)continue;if(l=="prototype")continue;i(t[l],e+"."+l,r+1)}}for(var r=0,a=e;r<a.length;r++){var o=a[r];if(o==null||!o.length){continue}if(o.indexOf(".")>=0){var s=t;var l=o.split(".");for(var u=0,f=l;u<f.length;u++){var c=f[u];if(!c.length)continue;s=s[c];if(!s)continue}i(s,o,0)}i(t[o],o,0)}}(function(e){if(typeof RSVP!==undefined){RSVP.on&&RSVP.on(function(e){t.log(e);t.log(e.get_stack&&e.get_stack()||e.stack)})}ss.initAssembly({},"App",{});e.Q$Externals=t;e.Q$Config=t.Config;e.Q$Culture=t.Culture;e.Q$Lookup=t.Lookup;e.Q$ScriptData=t.ScriptData;e.Q$LT=t.LT;function i(){n(e,t.Config.rootNamespaces,function(t,e){if(t.hasOwnProperty("__typeName")&&!t.__register)return;if(!t.__interfaces&&t.prototype.format&&e.substr(-9)=="Formatter"){t.__class=true;t.__interfaces=[Serenity.ISlickFormatter]}if(!t.__class){var n=ss.getBaseType(t);if(n.__class)t.__class=true}if(t.__class||t.__enum){t.__typeName=e;if(!t.__assembly){t.__assembly=ss.__assemblies["App"]}t.__assembly.__types[e]=t}delete t.__register})}$(function(){i();t.setMobileDeviceMode();$(e).bind("resize",function(){t.setMobileDeviceMode()})})})(window||{})})(Q||(Q={}));var Serenity;(function(t){var e=function(){function t(t){this.value=t}return t}();t.ColumnsKeyAttribute=e;var n=function(){function t(t){this.value=t}return t}();t.DialogTypeAttribute=n;var i=function(){function t(){}return t}();t.EditorAttribute=i;var r=function(){function t(t){this.value=t}return t}();t.ElementAttribute=r;var a=function(){function t(t){this.value=t}return t}();t.EntityTypeAttribute=a;var o=function(){function t(t){this.value=t}return t}();t.EnumKeyAttribute=o;var s=function(){function t(t){if(t===void 0){t=true}this.value=t}return t}();t.FlexifyAttribute=s;var l=function(){function t(t){this.value=t}return t}();t.FormKeyAttribute=l;var u=function(){function t(t){this.origin=t}return t}();t.GeneratedCodeAttribute=u;var f=function(){function t(t){this.value=t}return t}();t.IdPropertyAttribute=f;var c=function(){function t(t){this.value=t}return t}();t.IsActivePropertyAttribute=c;var d=function(){function t(t){this.value=t}return t}();t.ItemNameAttribute=d;var g=function(){function t(t){this.value=t}return t}();t.LocalTextPrefixAttribute=g;var p=function(){function t(t){if(t===void 0){t=true}this.value=t}return t}();t.MaximizableAttribute=p;var h=function(){function t(t){this.value=t}return t}();t.NamePropertyAttribute=h;var v=function(){function t(){}return t}();t.OptionAttribute=v;var m=function(){function t(t){this.value=t}return t}();t.OptionsTypeAttribute=m;var y=function(){function t(t){if(t===void 0){t=true}this.value=t}return t}();t.PanelAttribute=y;var b=function(){function t(t){if(t===void 0){t=true}this.value=t}return t}();t.ResizableAttribute=b;var w=function(){function t(t){if(t===void 0){t=true}this.value=t}return t}();t.ResponsiveAttribute=w;var C=function(){function t(t){this.value=t}return t}();t.ServiceAttribute=C})(Serenity||(Serenity={}));var Serenity;(function(t){var e;(function(e){function n(t,e){var n=t.__metadata;t.__metadata=t.__metadata||{};t.__metadata.attr=t.__metadata.attr||[];t.__metadata.attr.push(e)}e.addAttribute=n;function i(t,e,n){var i=t.__metadata;t.__metadata=t.__metadata||{};t.__metadata.members=t.__metadata.members||[];var r=undefined;for(var a=0,o=t.__metadata.members;a<o.length;a++){var s=o[a];if(s.name==e){r=s;break}}if(!r){r={name:e,attr:[],type:4,returnType:Object,sname:e};t.__metadata.members.push(r)}r.attr=r.attr||[];r.attr.push(n)}e.addMemberAttr=i;function r(e){return function(i){n(i,new t.ColumnsKeyAttribute(e))}}e.columnsKey=r;function a(e){return function(i){n(i,new t.DialogTypeAttribute(e))}}e.dialogType=a;function o(e){return function(i){var r=new t.EditorAttribute;if(e!==undefined)r.key=e;n(i,r)}}e.editor=o;function s(e){return function(i){n(i,new t.ElementAttribute(e))}}e.element=s;function l(e){return function(i){n(i,new t.EntityTypeAttribute(e))}}e.entityType=l;function u(e){return function(i){n(i,new t.EnumKeyAttribute(e))}}e.enumKey=u;function f(e){if(e===void 0){e=true}return function(i){n(i,new t.FlexifyAttribute(e))}}e.flexify=f;function c(e){return function(i){n(i,new t.FormKeyAttribute(e))}}e.formKey=c;function d(e){return function(i){n(i,new t.GeneratedCodeAttribute(e))}}e.generatedCode=d;function g(e){return function(i){n(i,new t.IdPropertyAttribute(e))}}e.idProperty=g;function p(t,e){return function(n){n.__register=true;n.__class=true;n.__assembly=e||ss.__assemblies["App"];if(t)n.__interfaces=t}}e.registerClass=p;function h(e,i,r){if(!e.__enum){Object.defineProperty(e,"__enum",{get:function(){return true}});e.prototype=e.prototype||{};for(var a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];if(isNaN(Q.parseInteger(s))&&e[s]!=null&&!isNaN(Q.parseInteger(e[s])))e.prototype[s]=e[s]}e.__register=true;if(i)n(e,new t.EnumKeyAttribute(i))}}e.registerEnum=h;function v(t,e){return p(t,e)}e.registerEditor=v;function m(e,n){if(e===void 0){e=[t.ISlickFormatter]}return p(e,n)}e.registerFormatter=m;function y(e){if(e===void 0){e=true}return function(i){n(i,new t.FilterableAttribute(e))}}e.filterable=y;function b(e){return function(i){n(i,new t.ItemNameAttribute(e))}}e.itemName=b;function w(e){return function(i){n(i,new t.IsActivePropertyAttribute(e))}}e.isActiveProperty=w;function C(e){return function(i){n(i,new t.LocalTextPrefixAttribute(e))}}e.localTextPrefix=C;function _(e){if(e===void 0){e=true}return function(i){n(i,new t.MaximizableAttribute(e))}}e.maximizable=_;
function x(e){return function(i){n(i,new t.NamePropertyAttribute(e))}}e.nameProperty=x;function $(){return function(e,n){i(e.constructor,n,new t.OptionAttribute)}}e.option=$;function S(e){return function(i){n(i,new t.OptionsTypeAttribute(e))}}e.optionsType=S;function T(e){if(e===void 0){e=true}return function(i){n(i,new t.PanelAttribute(e))}}e.panel=T;function P(e){if(e===void 0){e=true}return function(i){n(i,new t.ResizableAttribute(e))}}e.resizable=P;function k(e){if(e===void 0){e=true}return function(i){n(i,new t.ResponsiveAttribute(e))}}e.responsive=k;function A(e){return function(i){n(i,new t.ServiceAttribute(e))}}e.service=A})(e=t.Decorators||(t.Decorators={}))})(Serenity||(Serenity={}));var Serenity;(function(t){function e(t){return[t]}t.Criteria=e;var e;(function(t){var e=t;function n(t){return t==null||t.length===0||t.length===1&&typeof t[0]=="string"&&t[0].length===0}t.isEmpty=n;function i(t,n,i){if(e.isEmpty(t))return i;if(e.isEmpty(i))return t;return[t,n,i]}t.join=i;function r(t){return e.isEmpty(t)?t:["()",t]}t.paren=r;function a(t,e){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var a=i(t,"and",e);if(n){for(var o=0,s=n;o<s.length;o++){var l=s[o];a=i(a,"and",l)}}return a}t.and=a;function o(t,e){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var a=i(t,"or",e);if(n){for(var o=0,s=n;o<s.length;o++){var l=s[o];a=i(a,"or",l)}}return a}t.or=o})(e=t.Criteria||(t.Criteria={}))})(Serenity||(Serenity={}));var Serenity;(function(t){var e;(function(t){var e=0;function n(t,n){e++;var i="ExecuteOnceWhenShown"+e;var r=false;if(t.is(":visible")){n()}else{var a=t.closest(".ui-tabs");if(a.length>0){a.bind("tabsshow."+i,function(e){if(t.is(":visible")){a.unbind("tabsshow."+i);if(!r){r=true;t.unbind("shown."+i);n()}}})}var o;if(t.hasClass("ui-dialog")){o=t.children(".ui-dialog-content")}else{o=t.closest(".ui-dialog-content")}if(o.length>0){o.bind("dialogopen."+i,function(){o.unbind("dialogopen."+i);if(t.is(":visible")&&!r){r=true;t.unbind("shown."+i);n()}})}t.bind("shown."+i,function(){if(t.is(":visible")){t.unbind("shown."+i);if(!r){r=true;n()}}})}}t.executeOnceWhenShown=n;function i(t,n,i){e++;var r="ExecuteEverytimeWhenShown"+e;var a=t.is(":visible");if(a&&i){n()}var o=function(e){if(t.is(":visible")){if(!a){a=true;n()}}else{a=false}};var s=t.closest(".ui-tabs");if(s.length>0){s.bind("tabsactivate."+r,o)}var l=t.closest(".ui-dialog-content");if(l.length>0){l.bind("dialogopen."+r,o)}t.bind("shown."+r,o)}t.executeEverytimeWhenShown=i})(e=t.LazyLoadHelper||(t.LazyLoadHelper={}))})(Serenity||(Serenity={}));var Serenity;(function(t){var e;(function(t){function e(t,e,n){if(!t)return;var r=i(t);if(!r)return;var a=r[e];if(a==null){return}if(a===t.tabs("option","active")){t.tabs("option","active",0)}t.tabs(n?"disable":"enable",a)}t.setDisabled=e;function n(t){var e=t.children("ul").children("li").eq(t.tabs("option","active")).children("a").attr("href").toString();var n="_Tab";var i=e.lastIndexOf(n);if(i>=0){e=e.substr(i+n.length)}return e}t.activeTabKey=n;function i(t){var e=t.data("indexByKey");if(!e){e={};t.children("ul").children("li").children("a").each(function(t,n){var i=n.getAttribute("href").toString();var r="_Tab";var a=i.lastIndexOf(r);if(a>=0){i=i.substr(a+r.length)}e[i]=t});t.data("indexByKey",e)}return e}t.indexByKey=i})(e=t.TabsExtensions||(t.TabsExtensions={}))})(Serenity||(Serenity={}));var Serenity;(function(t){var e=function(){function e(t,n){var i=this;this.element=t;this.options=n||{};this.widgetName=e.getWidgetName(ss.getInstanceType(this));this.uniqueName=this.widgetName+(e.nextWidgetNumber++).toString();if(t.data(this.widgetName)){throw new ss.Exception(Q.format("The element already has widget '{0}'!",this.widgetName))}t.bind("remove."+this.widgetName,function(t){if(t.bubbles||t.cancelable){return}i.destroy()}).data(this.widgetName,this);this.addCssClass();if(this.isAsyncWidget()){window.setTimeout(function(){if(t&&!i.asyncPromise){i.asyncPromise=i.initializeAsync()}},0)}}e.prototype.destroy=function(){this.element.removeClass("s-"+ss.getTypeName(ss.getInstanceType(this)));this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.element=null;this.asyncPromise=null};e.prototype.addCssClass=function(){this.element.addClass(this.getCssClass())};e.prototype.getCssClass=function(){var t=ss.getInstanceType(this);var e="s-"+ss.getTypeName(t);var n=Q.replaceAll(ss.getTypeFullName(t),".","-");for(var i=0,r=Q.Config.rootNamespaces;i<r.length;i++){var a=r[i];if(Q.startsWith(n,a+"-")){n=n.substr(a.length+1);break}}n="s-"+n;if(e===n){return e}return e+" "+n};e.prototype.initializeAsync=function(){return RSVP.resolve()};e.prototype.isAsyncWidget=function(){return ss.isInstanceOfType(this,t.IAsyncInit)};e.getWidgetName=function(t){return Q.replaceAll(ss.getTypeFullName(t),".","_")};e.elementFor=function(e){var n=ss.getAttributes(e,t.ElementAttribute,true);var i=n.length>0?n[0].value:"<input/>";return $(i)};e.create=function(n){var i;if(ss.isAssignableFrom(t.IDialog,n.type)){i=new n.type(n.options);if(n.container)i.element.appendTo(n.container);n.element&&n.element(i.element)}else{var r=e.elementFor(n.type);if(n.container)r.appendTo(n.container);n.element&&n.element(r);i=new n.type(r,n.options)}i.init(n.init);return i};e.prototype.init=function(t){var e=this;var n=this.initialize();if(t){n.then(function(){return t(e)})}return this};e.prototype.initialize=function(){if(!this.isAsyncWidget()){return RSVP.resolve()}if(!this.asyncPromise){this.asyncPromise=this.initializeAsync()}return this.asyncPromise};e.nextWidgetNumber=0;e=__decorate([t.Decorators.registerClass()],e);return e}();t.Widget=e})(Serenity||(Serenity={}));var Serenity;(function(t){var e=function(e){__extends(n,e);function n(t,n){e.call(this,t,n);this.idPrefix=this.uniqueName+"_";var i=this.getTemplate().replace(new RegExp("~_","g"),this.idPrefix);i=Q.jsRender(i);this.element.html(i)}n.prototype.byId=function(t){return $("#"+this.idPrefix+t)};n.prototype.byID=function(e,n){return t.WX.getWidget(this.byId(e),n)};n.prototype.getTemplateName=function(){var e=function(t){var e=t.indexOf("$");if(e>=0){return t.substr(0,e)}return t};var i=ss.getInstanceType(this);var r=ss.getTypeFullName(i);var a=n.templateNames;var o=n.templateNames[r];if(o!=null){return o}while(i&&i!==t.Widget){var s=e(ss.getTypeFullName(i));for(var l=0,u=Q.Config.rootNamespaces;l<u.length;l++){var f=u[l];if(Q.startsWith(s,f+".")){s=s.substr(f.length+1);break}}if(Q.canLoadScriptData("Template."+s)){a[r]=s;return s}s=Q.replaceAll(s,".","_");if(Q.canLoadScriptData("Template."+s)||$("script#Template_"+s).length>0){a[r]=s;return s}s=e(ss.getTypeName(i));if(Q.canLoadScriptData("Template."+s)||$("script#Template_"+s).length>0){n.templateNames[r]=s;return s}i=ss.getBaseType(i)}a[r]=o=e(ss.getTypeName(ss.getInstanceType(this)));return o};n.prototype.getTemplate=function(){var t=this.getTemplateName();var e=$("script#Template_"+t);if(e.length>0){return e.html()}var n=Q.getTemplate(t);if(n==null){throw new Error(Q.format("Can't locate template for widget '{0}' with name '{1}'!",ss.getTypeName(ss.getInstanceType(this)),t))}return n};n.templateNames={};n=__decorate([t.Decorators.registerClass()],n);return n}(t.Widget);t.TemplatedWidget=e})(Serenity||(Serenity={}));var Serenity;(function(t){var e=function(e){__extends(n,e);function n(n){e.call(this,Q.newBodyDiv(),n);this.isPanel=ss.getAttributes(ss.getInstanceType(this),t.PanelAttribute,true).length>0;if(!this.isPanel){this.initDialog()}this.initValidator();this.initTabs();this.initToolbar()}n.getCssSize=function(t,e){var n=t.css(e);if(n==null){return null}if(!Q.endsWith(n,"px")){return null}n=n.substr(0,n.length-2);var i=Q.parseInteger(n);if(i==null||isNaN(i)||i==0)return null;return i};n.applyCssSizes=function(t,e){var i;var r=$("<div/>").hide().addClass(e).appendTo(document.body);try{var a=$("<div/>").addClass("size").appendTo(r);i=n.getCssSize(a,"minWidth");if(i!=null)t.minWidth=i;i=n.getCssSize(a,"width");if(i!=null)t.width=i;i=n.getCssSize(a,"height");if(i!=null)t.height=i;i=n.getCssSize(a,"minHeight");if(i!=null)t.minHeight=i}finally{r.remove()}};n.prototype.destroy=function(){this.tabs&&this.tabs.tabs("destroy");this.tabs=null;this.toolbar&&this.toolbar.destroy();this.toolbar=null;this.validator&&this.byId("Form").remove();this.validator=null;!this.isPanel&&this.element.dialog("destroy");$(window).unbind("."+this.uniqueName);e.prototype.destroy.call(this)};n.prototype.initDialog=function(){var e=this;this.element.dialog(this.getDialogOptions());var n=ss.getInstanceType(this);this.responsive=Q.Config.responsiveDialogs||ss.getAttributes(n,t.ResponsiveAttribute,true).length>0;if(this.responsive){t.DialogExtensions.dialogResizable(this.element);$(window).bind("resize."+this.uniqueName,function(t){if(e.element&&e.element.is(":visible")){e.handleResponsive()}});this.element.closest(".ui-dialog").addClass("flex-layout")}else if(ss.getAttributes(n,t.FlexifyAttribute,true).length>0){t.DialogExtensions.dialogFlexify(this.element);t.DialogExtensions.dialogResizable(this.element)}if(ss.getAttributes(n,t.MaximizableAttribute,true).length>0){t.DialogExtensions.dialogMaximizable(this.element)}var i=this;this.element.bind("dialogopen."+this.uniqueName,function(){$(document.body).addClass("modal-dialog-open");if(e.responsive){e.handleResponsive()}i.onDialogOpen()});this.element.bind("dialogclose."+this.uniqueName,function(){$(document.body).toggleClass("modal-dialog-open",$(".ui-dialog:visible").length>0);i.onDialogClose()})};n.prototype.initToolbar=function(){var e=this.byId("Toolbar");if(e.length===0){return}var n=this.element.closest(".ui-dialog");if(n.length===0){n=this.element}var i={buttons:this.getToolbarButtons(),hotkeyContext:n[0]};this.toolbar=new t.Toolbar(e,i)};n.prototype.getToolbarButtons=function(){return[]};n.prototype.getValidatorOptions=function(){return{}};n.prototype.initValidator=function(){var t=this.byId("Form");if(t.length>0){var e=this.getValidatorOptions();this.validator=t.validate(Q.validateOptions(e))}};n.prototype.resetValidation=function(){this.validator&&this.validator.resetAll()};n.prototype.validateForm=function(){return this.validator==null||!!this.validator.form()};n.prototype.dialogOpen=function(){if(this.isPanel){return}this.element.dialog().dialog("open")};n.prototype.onDialogOpen=function(){$(":input:eq(0)",this.element).focus();this.arrange();this.tabs&&this.tabs.tabs("option","active",0)};n.prototype.arrange=function(){this.element.find(".require-layout").filter(":visible").each(function(t,e){$(e).triggerHandler("layout")})};n.prototype.onDialogClose=function(){var t=this;$(document).trigger("click");if($.qtip){$(document.body).children(".qtip").each(function(t,e){$(e).qtip("hide")})}window.setTimeout(function(){var e=t.element;t.destroy();e.remove();Q.positionToastContainer(false)},0)};n.prototype.addCssClass=function(){var n=ss.getInstanceType(this);if(ss.getAttributes(n,t.PanelAttribute,true).length>0){e.prototype.addCssClass.call(this)}};n.prototype.getDialogOptions=function(){var e={};var i="s-Dialog "+this.getCssClass();e.dialogClass=i;e.width=920;n.applyCssSizes(e,i);e.autoOpen=false;var r=ss.getInstanceType(this);e.resizable=ss.getAttributes(r,t.ResizableAttribute,true).length>0;e.modal=true;e.position={my:"center",at:"center",of:$(window.window)};return e};n.prototype.dialogClose=function(){if(this.isPanel){return}this.element.dialog().dialog("close")};Object.defineProperty(n.prototype,"dialogTitle",{get:function(){if(this.isPanel){return null}return this.element.dialog("option","title")},set:function(t){if(this.isPanel){return}this.element.dialog("option","title",t)},enumerable:true,configurable:true});n.prototype.set_dialogTitle=function(t){this.dialogTitle=t};n.prototype.initTabs=function(){var t=this.byId("Tabs");if(t.length===0){return}this.tabs=t.tabs({})};n.prototype.handleResponsive=function(){var t=this.element.dialog();var e=this.element.closest(".ui-dialog");if($(document.body).hasClass("mobile-device")){var n=this.element.data("responsiveData");if(!n){n={};n.draggable=t.dialog("option","draggable");n.resizable=t.dialog("option","resizable");var i=e.position();n.left=i.left;n.top=i.top;n.width=e.width();n.height=e.height();n.contentHeight=this.element.height();this.element.data("responsiveData",n);t.dialog("option","draggable",false);t.dialog("option","resizable",false)}e.addClass("mobile-layout");e.css({left:"0px",top:"0px",width:$(window).width()+"px",height:$(window).height()+"px"});$(document.body).scrollTop(0);Q.layoutFillHeight(this.element)}else{var r=this.element.data("responsiveData");if(r){t.dialog("option","draggable",r.draggable);t.dialog("option","resizable",r.resizable);this.element.closest(".ui-dialog").css({left:"0px",top:"0px",width:r.width+"px",height:r.height+"px"});this.element.height(r.contentHeight);e.removeClass("mobile-layout");this.element.removeData("responsiveData")}}};n=__decorate([t.Decorators.registerClass([t.IDialog])],n);return n}(t.TemplatedWidget);t.TemplatedDialog=e})(Serenity||(Serenity={}));var Serenity;(function(t){var e=function(e){__extends(n,e);function n(){var n=this;e.call(this);new t.QuickSearchInput(this.byId("Search"),{onSearch:function(t,e,i){e=Q.trimToNull(e);if(e!=null)e=Select2.util.stripDiacritics(e.toLowerCase());n.element.find("li").each(function(t,n){$(n).toggle(!e||Select2.util.stripDiacritics($(n).text().toLowerCase()).indexOf(e)>=0)})}});this.ulVisible=this.byId("VisibleCols");this.ulHidden=this.byId("HiddenCols")}n.createToolButton=function(e){return{hint:Q.text("Controls.ColumnPickerDialog.Title"),cssClass:"column-picker-button",onClick:function(){var n=new t.ColumnPickerDialog;n.allColumns=e.allColumns;if(e.initialSettings){var i=e.initialSettings;if(i.columns&&i.columns.length)n.defaultColumns=i.columns.map(function(t){return t.id})}n.visibleColumns=e.slickGrid.getColumns().map(function(t){return t.id});n.done=function(){e.allColumns=n.allColumns;var t=n.allColumns.filter(function(t){return t.visible===true});e.slickGrid.setColumns(t);e.persistSettings();e.refresh()};n.dialogOpen()}}};n.prototype.getDialogOptions=function(){var t=this;var n=e.prototype.getDialogOptions.call(this);n.title=Q.text("Controls.ColumnPickerDialog.Title");n.width=600;n.buttons=[{text:Q.text("Controls.ColumnPickerDialog.RestoreDefaults"),click:function(){var e={};t.ulVisible.children().add(t.ulHidden.children()).each(function(t,n){var i=$(n);e[i.data("key")]=i});var n=null;for(var i=0,r=t.defaultColumns;i<r.length;i++){var a=r[i];var o=e[a];if(!o)continue;if(n==null)o.prependTo(t.ulVisible);else o.insertAfter(n);n=o;var s=o.data("key");delete e[s]}for(var s in e)e[s].appendTo(t.ulHidden);t.updateListStates()}},{text:Q.text("Dialogs.OkButton"),click:function(){var e=[];for(var n=0,i=t.allColumns;n<i.length;n++){var r=i[n];r.visible=false}t.visibleColumns=t.ulVisible.children().toArray().map(function(n){var i=$(n).data("key");var r=t.colById[i];r.visible=true;e.push(r);return i});for(var a=0,o=t.allColumns;a<o.length;a++){var r=o[a];if(!r.visible)e.push(r)}t.allColumns=e;t.done&&t.done();t.dialogClose()}},{text:Q.text("Dialogs.CancelButton"),click:function(){t.dialogClose()}}];return n};n.prototype.getTitle=function(t){if(t.id=="__select__")return"[x]";return t.name||t.toolTip||t.id};n.prototype.createLI=function(t){return $('\n<li data-key="'+t.id+'">\n  <span class="drag-handle">☰</span>\n  '+Q.htmlEncode(this.getTitle(t))+'\n  <i class="js-hide" title="'+Q.text("Controls.ColumnPickerDialog.HideHint")+'">✖</i>\n  <i class="js-show icon-eye" title="'+Q.text("Controls.ColumnPickerDialog.ShowHint")+'"></i>\n</li>')};n.prototype.updateListStates=function(){this.ulVisible.children().removeClass("bg-info").addClass("bg-success");this.ulHidden.children().removeClass("bg-success").addClass("bg-info")};n.prototype.setupColumns=function(){var t=this;this.allColumns=this.allColumns||[];this.visibleColumns=this.visibleColumns||[];var e={};for(var n=0,i=this.visibleColumns;n<i.length;n++){var r=i[n];e[r]=true}this.colById={};for(var a=0,o=this.allColumns;a<o.length;a++){var s=o[a];this.colById[s.id]=s}if(this.defaultColumns==null)this.defaultColumns=this.visibleColumns.slice(0);var l=[];for(var u=0,f=this.allColumns;u<f.length;u++){var c=f[u];if(!e[c.id]&&(!c.sourceItem||c.sourceItem.filterOnly!==true)){l.push(c)}}var d=l.sort(function(e,n){return Q.turkishLocaleCompare(t.getTitle(e),t.getTitle(n))});for(var g=0,p=this.visibleColumns;g<p.length;g++){var r=p[g];var h=this.colById[r];if(!h)continue;this.createLI(h).appendTo(this.ulVisible)}for(var v=0,m=d;v<m.length;v++){var y=m[v];this.createLI(y).appendTo(this.ulHidden)}this.updateListStates();if(typeof Sortable!=="undefined"&&Sortable.create){Sortable.create(this.ulVisible[0],{group:this.uniqueName+"_group",filter:".js-hide",onFilter:function(e){$(e.item).appendTo(t.ulHidden);t.updateListStates()},onEnd:function(e){return t.updateListStates()}});Sortable.create(this.ulHidden[0],{group:this.uniqueName+"_group",sort:false,filter:".js-show",onFilter:function(e){$(e.item).appendTo(t.ulVisible);t.updateListStates()},onEnd:function(e){return t.updateListStates()}})}};n.prototype.onDialogOpen=function(){e.prototype.onDialogOpen.call(this);this.element.find("input").removeAttr("disabled");this.element.closest(".ui-dialog").children(".ui-dialog-buttonpane").find("button").eq(0).addClass("restore-defaults").next().focus();this.setupColumns();Q.centerDialog(this.element)};n.prototype.getTemplate=function(){return'\n<div class="search"><input id="~_Search" type="text" disabled /></div>\n<div class="columns-container">\n<div class="column-list visible-list bg-success">\n  <h5><i class="icon-eye"></i> '+Q.text("Controls.ColumnPickerDialog.VisibleColumns")+'</h5>\n  <ul id="~_VisibleCols"></ul>\n</div>\n<div class="column-list hidden-list bg-info">\n  <h5><i class="icon-list"></i> '+Q.text("Controls.ColumnPickerDialog.HiddenColumns")+'</h5>\n  <ul id="~_HiddenCols"></ul>\n</div>\n</div>'};n=__decorate([t.Decorators.registerClass(),t.Decorators.resizable(),t.Decorators.responsive()],n);return n}(t.TemplatedDialog);t.ColumnPickerDialog=e})(Serenity||(Serenity={}));if($.fn.button&&$.fn.button.noConflict){var btn=$.fn.button.noConflict();$.fn.btn=btn}$.fn.flexHeightOnly=function(t){if(t===void 0){t=1}return this.flexWidthHeight(0,t)};$.fn.flexWidthOnly=function(t){if(t===void 0){t=1}return this.flexWidthHeight(t,0)};$.fn.flexWidthHeight=function(t,e){if(t===void 0){t=1}if(e===void 0){e=1}return this.addClass("flexify").data("flex-x",t).data("flex-y",e)};$.fn.flexX=function(t){return this.data("flex-x",t)};$.fn.flexY=function(t){return this.data("flex-y",t)};if($.fn.button&&$.fn.button.noConflict){var btn=$.fn.button.noConflict();$.fn.btn=btn}(function(t){t.widget("ui.slickPager",{options:{view:null,showRowsPerPage:true,rowsPerPageOptions:[20,100,500,2e3],onRpChange:null},_create:function(){var e=this;var n=e.options;var i=n.view;if(!i)throw"SlickPager requires view option to be set!";this.element.addClass("s-SlickPager slick-pg").html('<div class="slick-pg-in">'+'<div class="slick-pg-grp">'+'<div class="slick-pg-first slick-pg-btn"><span class="slick-pg-btn-span"></span></div>'+'<div class="slick-pg-prev slick-pg-btn"><span class="slick-pg-btn-span"></span></div>'+'</div><div class="slick-pg-sep"></div><div class="slick-pg-grp">'+'<span class="slick-pg-control">&nbsp;'+Q.text("Controls.Pager.Page")+'&nbsp;<input class="slick-pg-current" type="text" size="4" value="1" /> / '+'<span class="slick-pg-total"> 1 </span></span>'+'</div><div class="slick-pg-sep"></div><div class="slick-pg-grp">'+'<div class="slick-pg-next slick-pg-btn"><span class="slick-pg-btn-span"></span></div>'+'<div class="slick-pg-last slick-pg-btn"><span class="slick-pg-btn-span"></span></div>'+'</div><div class="slick-pg-sep"></div><div class="slick-pg-grp">'+'<div class="slick-pg-reload slick-pg-btn"><span class="slick-pg-btn-span"></span></div>'+'</div><div class="slick-pg-sep"></div>'+'<div class="slick-pg-grp"><span class="slick-pg-stat"></span></div></div>');t(".slick-pg-reload",this.element).click(function(){i.populate()});t(".slick-pg-first",this.element).click(function(){e._changePage("first")});t(".slick-pg-prev",this.element).click(function(){e._changePage("prev")});t(".slick-pg-next",this.element).click(function(){e._changePage("next")});t(".slick-pg-last",this.element).click(function(){e._changePage("last")});t(".slick-pg-current",this.element).keydown(function(t){if(t.keyCode==13)e._changePage("input")});if(e.options.showRowsPerPage){var r,a="";for(var o=0;o<n.rowsPerPageOptions.length;o++){if(i.rowsPerPage==n.rowsPerPageOptions[o])a='selected="selected"';else a="";r+="<option value='"+n.rowsPerPageOptions[o]+"' "+a+" >"+n.rowsPerPageOptions[o]+"&nbsp;&nbsp;</option>"}t(".slick-pg-in",this.element).prepend('<div class="slick-pg-grp"><select class="slick-pg-size" name="rp">'+r+'</select></div><div class="slick-pg-sep"></div>');t("select.slick-pg-size",this.element).change(function(){if(n.onRowsPerPageChange)n.onRowsPerPageChange(+this.value);else{i.newp=1;i.setPagingOptions({page:1,rowsPerPage:+this.value})}})}i.onPagingInfoChanged.subscribe(function(){e._updatePager()})},destroy:function(){t.Widget.prototype.destroy.apply(this,arguments)},_changePage:function(e){var n=this.options.view;if(!n||n.loading)return true;var i=n.getPagingInfo();var r=!i.rowsPerPage||!i.totalCount?1:Math.ceil(i.totalCount/i.rowsPerPage);var a;switch(e){case"first":a=1;break;case"prev":if(i.page>1)a=parseInt(i.page)-1;break;case"next":if(i.page<r)a=parseInt(i.page)+1;break;case"last":a=r;break;case"input":var o=parseInt(t("input.slick-pg-current",this.element).val());if(isNaN(o))o=1;else if(o<1)o=1;else if(o>r)o=r;t(".slick-pg-current",this.element).val(o);a=o;break}if(a==i.page)return false;if(this.options.onChangePage)this.options.onChangePage(a);else{n.setPagingOptions({page:a})}},_updatePager:function(){var e=this.options.view;var n=e.getPagingInfo();var i=!n.rowsPerPage||!n.totalCount?1:Math.ceil(n.totalCount/n.rowsPerPage);t(".slick-pg-current",this.element).val(n.page);t(".slick-pg-total",this.element).html(i);var r=(n.page-1)*n.rowsPerPage+1;var a=r+n.rowsPerPage-1;if(n.totalCount<a)a=n.totalCount;var o;if(n.loading){o=Q.text("Controls.Pager.LoadingStatus")}else if(n.error){o=n.error}else if(n.totalCount>0){o=Q.text("Controls.Pager.PageStatus");o=o.replace(/{from}/,r);o=o.replace(/{to}/,a);o=o.replace(/{total}/,n.totalCount)}else o=Q.text("Controls.Pager.NoRowStatus");t(".slick-pg-stat",this.element).html(o);t(".slick-pg-size",this.element).val((n.rowsPerPage||0).toString())},_setOption:function(e,n){t.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);var Slick;(function(t){var e;(function(t){var e})(e=t.Data||(t.Data={}))})(Slick||(Slick={}));var Slick;(function(t){var e=function(){function e(e){var n=this;var i={groupItemMetadataProvider:null,inlineFilters:false};var r;var a=[];var o=[];var s={};var l=null;var u=null;var f=null;var c=0;var d=true;var g;var p;var h={};var v={};var m;var y=[];var b;var w;var C=[];var _={getter:null,formatter:null,comparer:function(t,e){return t.value===e.value?0:t.value>e.value?1:-1},predefinedValues:[],aggregateEmpty:false,aggregateCollapsed:false,aggregateChildGroups:false,collapsed:false,displayTotalsRow:true,lazyTotalsCalculation:false};var x={};var S=[];var T=[];var P=[];var k=":|:";var A=1;var I=0;var D=new t.Event;var N=new t.Event;var O=new t.Event;var E=false;var F=null;var R=0;var M=0;var H;var z;var j=null;var L=new t.Event;var V=new t.Event;var B=new t.Event;var W=new t.Event;var U;function q(){c++}function G(){c--;if(c<=0)Ke()}function K(t){h=t}function Z(t){m=t}function J(t){t=t||0;var e;for(var n=t,i=a.length;n<i;n++){e=a[n][r];if(e===undefined){var o="Each data element must implement a unique '"+r+"' property. Object at index '"+n+"' "+"has no identity value: ";o+=$.toJSON(a[n]);throw o}s[e]=n}}function Y(){var t;for(var e=0,n=a.length;e<n;e++){t=a[e][r];if(t===undefined||s[t]!==e){var i="Each data element must implement a unique '"+r+"' property. Object at index '"+e+"' ";if(t==undefined)i+="has no identity value: ";else i+="has repeated identity value '"+t+"': ";i+=$.toJSON(a[e]);throw i}}}function X(){return a}function te(t){a=y=t;s={};l=null;x.totals={};J();Y();Ke();L.notify({dataView:n},null,n)}function ee(t){var e=false;if(t.rowsPerPage!=undefined&&U.rowsPerPage!=t.rowsPerPage){U.rowsPerPage=t.rowsPerPage;e=true}if(t.page!=undefined){var n;if(!U.rowsPerPage)n=1;else if(j==null)n=t.page;else n=Math.min(t.page,Math.ceil(j/U.rowsPerPage)+1);if(n<1)n=1;if(n!=A){U.seekToPage=n;e=true}}if(e)Xe()}function ne(){return{rowsPerPage:U.rowsPerPage,page:A,totalCount:j,loading:E,error:F,dataView:n}}function ie(t,e){d=e;p=t;g=null;if(e===false){a.reverse()}a.sort(t);if(e===false){a.reverse()}s={};J();Ke()}function re(t,e){d=e;g=t;p=null;var n=Object.prototype.toString;Object.prototype.toString=typeof t==="function"?t:function(){return this[t]};if(e===false){a.reverse()}a.sort();Object.prototype.toString=n;if(e===false){a.reverse()}s={};J();Ke()}function ae(){if(p){ie(p,d)}else if(g){re(g,d)}}function oe(t){u=t;if(e.inlineFilters){b=Le();w=Ve()}Ke()}function se(){return S}function le(t){t=t||{};x.aggregators=t.aggregators||[];x.compiledAccumulators=[];x.totals={};var e=x.aggregators.length;while(e--){x.compiledAccumulators[e]=je(x.aggregators[e])}fe(S||[])}function ue(){x.totals=x.totals||{};if(!x.totals.initialized){x.aggregators=x.aggregators||[];x.compiledAccumulators=x.compiledAccumulators||[];var t,e=x.aggregators.length;while(e--){t=x.aggregators[e];t.init();x.compiledAccumulators[e].call(t,a);t.storeResult(x.totals)}x.totals.initialized=true}return x.totals}function fe(n){if(!e.groupItemMetadataProvider){e.groupItemMetadataProvider=new t.Data.GroupItemMetadataProvider}T=[];P=[];n=n||[];S=n instanceof Array?n:[n];for(var i=0;i<S.length;i++){var r=S[i]=$.extend(true,{},_,S[i]);r.aggregators=r.aggregators||x.aggregators||[];r.getterIsAFn=typeof r.getter==="function";r.compiledAccumulators=[];var a=r.aggregators.length;while(a--){r.compiledAccumulators[a]=je(r.aggregators[a])}P[i]={}}Ke()}function ce(t){return a[t]}function de(t){return s[t]}function ge(){if(!l){l={};for(var t=0,e=o.length;t<e;t++){l[o[t][r]]=t}}}function pe(t){ge();return l[t]}function he(t){return a[s[t]]}function ve(t){var e=[];ge();for(var n=0,i=t.length;n<i;n++){var r=l[t[n]];if(r!=null){e[e.length]=r}}return e}function me(t){var e=[];for(var n=0,i=t.length;n<i;n++){if(t[n]<o.length){e[e.length]=o[t[n]][r]}}return e}function ye(t,e){if(s[t]===undefined||t!==e[r]){throw"Invalid or non-matching id"}a[s[t]]=e;if(!f){f={}}f[t]=true;Ke()}function be(t,e){a.splice(t,0,e);J(t);Ke()}function we(t){a.push(t);J(a.length-1);Ke()}function Ce(t){var e=s[t];if(e===undefined){throw"Invalid id"}delete s[t];a.splice(e,1);J(e);Ke()}function _e(){return o}function xe(){return o.length}function $e(t){var e=o[t];if(e&&e.__group&&e.totals&&!e.totals.initialized){var n=S[e.level];if(!n.displayTotalsRow){Fe(e.totals);e.title=n.formatter?n.formatter(e):e.value}}else if(e&&e.__groupTotals&&!e.initialized){Fe(e)}return e}function Se(t){var n=o[t];if(n===undefined){return null}if(n.__group){return e.groupItemMetadataProvider.getGroupRowMetadata(n)}if(n.__groupTotals){return e.groupItemMetadataProvider.getTotalsRowMetadata(n)}return e.getItemMetadata&&e.getItemMetadata(n,t)||null}function Te(t,e){if(t==null){for(var n=0;n<S.length;n++){P[n]={};S[n].collapsed=e}}else{P[t]={};S[t].collapsed=e}Ke()}function Pe(t){Te(t,true)}function ke(t){Te(t,false)}function Ae(t){var e=t[0];if(t.length===1&&e.indexOf(k)!==-1){return{level:e.split(k).length-1,groupingKey:e}}else{return{level:t.length-1,groupingKey:t.join(k)}}}function Ie(t,e){var n=Ae(t);P[n.level][n.groupingKey]=S[n.level].collapsed^e;Ke()}function De(t){var e=Array.prototype.slice.call(arguments);Ie(e,true)}function Ne(t){var e=Array.prototype.slice.call(arguments);Ie(e,false)}function Oe(){return T}function Qe(e,n,i,r,a){var o=e[n];if(!o){o=new t.Group;o.value=n;o.level=i;o.groupingKey=(r?r.groupingKey+k:"")+n;a[a.length]=o;e[n]=o}return o}function Ee(t,e){var n;var i;var r=[];var a={};var o;var s=e?e.level+1:0;var l=S[s];for(var u=0,f=l.predefinedValues.length;u<f;u++){i=l.predefinedValues[u];n=Qe(a,i,s,e,r)}for(var u=0,f=t.length;u<f;u++){o=t[u];i=l.getterIsAFn?l.getter(o):o[l.getter];n=Qe(a,i,s,e,r);n.rows[n.count++]=o}if(s<S.length-1){for(var u=0;u<r.length;u++){n=r[u];n.groups=Ee(n.rows,n)}}r.sort(S[s].comparer);return r}function Fe(t){var e=t.group;var n=S[e.level];var i=e.level==S.length;var r,a=n.aggregators.length;if(!i&&n.aggregateChildGroups){var o=e.groups.length;while(o--){if(!e.groups[o].totals.initialized){Fe(e.groups[o].totals)}}}while(a--){r=n.aggregators[a];r.init();if(!i&&n.aggregateChildGroups){n.compiledAccumulators[a].call(r,e.groups)}else{n.compiledAccumulators[a].call(r,e.rows)}r.storeResult(t)}t.initialized=true}function Re(e){var n=S[e.level];var i=new t.GroupTotals;i.group=e;e.totals=i;if(!n.lazyTotalsCalculation){Fe(i)}}function Me(t,e){e=e||0;var n=S[e];var i=n.collapsed;var r=P[e];var a=t.length,o;while(a--){o=t[a];if(o.collapsed&&!n.aggregateCollapsed){continue}if(o.groups){Me(o.groups,e+1)}if(n.aggregators.length&&(n.aggregateEmpty||o.rows.length||o.groups&&o.groups.length)){Re(o)}o.collapsed=i^r[o.groupingKey];o.title=n.formatter?n.formatter(o):o.value}}function He(t,e){e=e||0;var n=S[e];var i=[],r,a=0,o;for(var s=0,l=t.length;s<l;s++){o=t[s];i[a++]=o;if(!o.collapsed){r=o.groups?He(o.groups,e+1):o.rows;for(var u=0,f=r.length;u<f;u++){i[a++]=r[u]}}if(o.totals&&n.displayTotalsRow&&(!o.collapsed||n.aggregateCollapsed)){i[a++]=o.totals}}return i}function ze(t){var e=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/;var n=t.toString().match(e);return{params:n[1].split(","),body:n[2]}}function je(t){var e=ze(t.accumulate);var n=new Function("_items","for (var "+e.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+e.params[0]+" = _items[_i]; "+e.body+"}");n.displayName=n.name="compiledAccumulatorLoop";return n}function Le(){var t=ze(u);var e=t.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");var n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,e);n=n.replace(/\$item\$/gi,t.params[0]);n=n.replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args",n);i.displayName=i.name="compiledFilter";return i}function Ve(){var t=ze(u);var e=t.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");var n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,e);n=n.replace(/\$item\$/gi,t.params[0]);n=n.replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args,_cache",n);i.displayName=i.name="compiledFilterWithCaching";return i}function Be(t,e){var n=[],i=0;for(var r=0,a=t.length;r<a;r++){if(u(t[r],e)){n[i++]=t[r]}}return n}function We(t,e,n){var i=[],r=0,a;for(var o=0,s=t.length;o<s;o++){a=t[o];if(n[o]){i[r++]=a}else if(u(a,e)){i[r++]=a;n[o]=true}}return i}function Ue(t){if(u){var n=e.inlineFilters?b:Be;var i=e.inlineFilters?w:We;if(h.isFilterNarrowing){y=n(y,m)}else if(h.isFilterExpanding){y=i(t,m,C)}else if(!h.isFilterUnchanged){y=n(t,m)}}else{y=t.concat()
}return{totalRows:y.length,rows:y}}function qe(t,e){var n,i,a,o=[];var s=0,l=e.length;if(h&&h.ignoreDiffsBefore){s=Math.max(0,Math.min(e.length,h.ignoreDiffsBefore))}if(h&&h.ignoreDiffsAfter){l=Math.min(e.length,Math.max(0,h.ignoreDiffsAfter))}for(var u=s,c=t.length;u<l;u++){if(u>=c){o[o.length]=u}else{n=e[u];i=t[u];if(S.length&&(a=n.__nonDataRow||i.__nonDataRow)&&n.__group!==i.__group||n.__group&&!n.equals(i)||a&&(n.__groupTotals||i.__groupTotals)||n[r]!=i[r]||f&&f[n[r]]){o[o.length]=u}}}return o}function Ge(t){l=null;if(h.isFilterNarrowing!=v.isFilterNarrowing||h.isFilterExpanding!=v.isFilterExpanding){C=[]}var e=Ue(t);I=e.totalRows;var n=e.rows;x.totals={};T=[];if(S.length){T=Ee(n);if(T.length){Me(T);n=He(T)}}var i=qe(o,n);o=n;return i}function Ke(){if(c){return}var t=o.length;var e=I;var i=Ge(a);f=null;v=h;h={};if(e!==I){O.notify(ne(),null,n)}if(t!==o.length){D.notify({previous:t,current:o.length,dataView:n},null,n)}if(i.length>0){N.notify({rows:i,dataView:n},null,n)}}function Ze(e,n,i){var r=this;var a;var o=r.mapRowsToIds(e.getSelectedRows());var s=new t.Event;function l(n){if(o.join(",")==n.join(",")){return}o=n;s.notify({grid:e,ids:o,dataView:r},new t.EventData,r)}function u(){if(o.length>0){a=true;var t=r.mapIdsToRows(o);if(!n){l(r.mapRowsToIds(t))}e.setSelectedRows(t);a=false}}e.onSelectedRowsChanged.subscribe(function(t,n){if(a){return}var s=r.mapRowsToIds(e.getSelectedRows());if(!i||!e.getOptions().multiSelect){l(s)}else{var u=$.grep(o,function(t){return r.getRowById(t)===undefined});l(u.concat(s))}});this.onRowsChanged.subscribe(u);this.onRowCountChanged.subscribe(u);return s}function Je(t,e){var n;var i;a(t.getCellCssStyles(e));function a(t){n={};for(var e in t){var i=o[e][r];n[i]=t[e]}}function s(){if(n){i=true;ge();var r={};for(var a in n){var o=l[a];if(o!=undefined){r[o]=n[a]}}t.setCellCssStyles(e,r);i=false}}t.onCellCssStylesChanged.subscribe(function(t,n){if(i){return}if(e!=n.key){return}if(n.hash){a(n.hash)}});this.onRowsChanged.subscribe(s);this.onRowCountChanged.subscribe(s)}function Ye(t){if(U.onProcessData&&t)t=U.onProcessData(t,U)||t;F=null;E&&E.abort();E=false;if(!t){F=U.errormsg;O.notify(ne());return false}var e=t;t.TotalCount=t.TotalCount||0;t.Entities=t.Entities||[];if(!t.Skip||!U.rowsPerPage&&!t.Take)t.Page=1;else t.Page=Math.ceil(t.Skip/(t.Take||U.rowsPerPage))+1;A=t.Page;j=t.TotalCount;te(t.Entities);O.notify(ne())}function Xe(){if(R>0){M++;return}M=0;E&&E.abort();if(U.onSubmit){var t=U.onSubmit(U);if(t===false)return false}V.notify(this);if(!U.url)return false;if(!U.seekToPage)U.seekToPage=1;var e={};var n=(U.seekToPage-1)*U.rowsPerPage;if(n)e.Skip=n;if(U.rowsPerPage)e.Take=U.rowsPerPage;if(U.sortBy&&U.sortBy.length){if($.isArray(U.sortBy))e.Sort=U.sortBy;else{e.Sort=[U.sortBy]}}if(U.params){e=$.extend(e,U.params)}var i=z;var r=this;var a={cache:false,type:U.method,contentType:H,url:U.url,data:e,dataType:i,success:function(t){E=false;if(t.Error)Q.notifyError(t.Error.Message||t.Error.Code);else Ye(t);B.notify(this)},error:function(t,e,n){E=false;if((t.getResponseHeader("content-type")||"").toLowerCase().indexOf("application/json")>=0){var i=$.parseJSON(t.responseText);if(i!=null&&i.Error!=null){Q.notifyError(i.Error.Message||i.Error.Code);O.notify(ne());B.notify(this);return}}F=t.errormsg;O.notify(ne());B.notify(this)},complete:function(){E=false}};if(U.onAjaxCall){var o=U.onAjaxCall(this,a);if(o===false){E=false;O.notify(ne());return false}}a.data=$.toJSON(a.data);O.notify(ne());E=$.ajax(a)}function tn(){if(R==0)M=0;R++}function en(){if(R>0){R--;if(R==0&&M>0)Xe()}}U={beginUpdate:q,endUpdate:G,setPagingOptions:ee,getPagingInfo:ne,getRows:_e,getItems:X,setItems:te,setFilter:oe,sort:ie,fastSort:re,reSort:ae,setSummaryOptions:le,getGrandTotals:ue,setGrouping:fe,getGrouping:se,collapseAllGroups:Pe,expandAllGroups:ke,collapseGroup:De,expandGroup:Ne,getGroups:Oe,getIdxById:de,getRowById:pe,getItemById:he,getItemByIdx:ce,mapRowsToIds:me,mapIdsToRows:ve,setRefreshHints:K,setFilterArgs:Z,refresh:Ke,updateItem:ye,insertItem:be,addItem:we,deleteItem:Ce,syncGridSelection:Ze,syncGridCellCssStyles:Je,getLength:xe,getItem:$e,getItemMetadata:Se,onRowCountChanged:D,onRowsChanged:N,onPagingInfoChanged:O,addData:Ye,populate:Xe,populateLock:tn,populateUnlock:en,onDataChanged:L,onDataLoaded:B,onDataLoading:V};r=e.idField||"id";H=e.contentType||"application/json";z=e.dataType||"json";u=e.filter||null;U.params=e.params||{};U.onSubmit=e.onSubmit||null;U.url=e.url||null;U.rowsPerPage=e.rowsPerPage||0;U.seekToPage=e.seekToPage||1;U.onAjaxCall=e.onAjaxCall||null;U.onProcessData=e.onProcessData||null;U.method=e.method||"POST";U.errormsg=U.errormsg||Q.text("Controls.Pager.DefaultLoadError");U.sortBy=e.sortBy||[];U.idField=r;if(e.url&&e.autoLoad){Xe()}return U}return e}();t.RemoteView=e})(Slick||(Slick={}));var Slick;(function(t){var e;(function(t){function e(t){this.field_=t;this.init=function(){this.count_=0;this.nonNullCount_=0;this.sum_=0};this.accumulate=function(t){var e=t[this.field_];this.count_++;if(e!=null&&e!==""&&!isNaN(e)){this.nonNullCount_++;this.sum_+=parseFloat(e)}};this.storeResult=function(t){if(!t.avg){t.avg={}}if(this.nonNullCount_!=0){t.avg[this.field_]=this.sum_/this.nonNullCount_}}}t.Avg=e;function n(t,e){this.field_=t;this.weightedField_=e;this.init=function(){this.sum_=0;this.weightedSum_=0};this.accumulate=function(t){var e=t[this.field_];var n=t[this.weightedField_];if(this.isValid(e)&&this.isValid(n)){this.weightedSum_+=parseFloat(n);this.sum_+=parseFloat(e)*parseFloat(n)}};this.storeResult=function(t){if(!t.avg){t.avg={}}if(this.sum_&&this.weightedSum_){t.avg[this.field_]=this.sum_/this.weightedSum_}};this.isValid=function(t){return t!==null&&t!==""&&!isNaN(t)}}t.WeightedAvg=n;function i(t){this.field_=t;this.init=function(){this.min_=null};this.accumulate=function(t){var e=t[this.field_];if(e!=null&&e!==""&&!isNaN(e)){if(this.min_==null||e<this.min_){this.min_=e}}};this.storeResult=function(t){if(!t.min){t.min={}}t.min[this.field_]=this.min_}}t.Min=i;function r(t){this.field_=t;this.init=function(){this.max_=null};this.accumulate=function(t){var e=t[this.field_];if(e!=null&&e!==""&&!isNaN(e)){if(this.max_==null||e>this.max_){this.max_=e}}};this.storeResult=function(t){if(!t.max){t.max={}}t.max[this.field_]=this.max_}}t.Max=r;function a(t){this.field_=t;this.init=function(){this.sum_=null};this.accumulate=function(t){var e=t[this.field_];if(e!=null&&e!==""&&!isNaN(e)){this.sum_+=parseFloat(e)}};this.storeResult=function(t){if(!t.sum){t.sum={}}t.sum[this.field_]=this.sum_}}t.Sum=a})(e=t.Aggregators||(t.Aggregators={}))})(Slick||(Slick={}));var Q;(function(t){var e;function n(t,n){e.call(this,t,n);this.errorsFor(t).each(function(e,n){if($(t).hasClass("error"))$(n).removeClass("checked");$(n).attr("title",$(n).text())})}function i(){if($.validator.methods["customValidate"]==null){$.validator.addMethod("customValidate",function(t,e){var n=this.optional(e);if(e==null||!!n){return n}var i=$._data(e,"events");if(!i){return true}var r=i.customValidate;if(r==null||r.length===0){return true}var a=$(e);for(var o=0;!!(o<r.length);o++){var s=ss.safeCast(r[o].handler,Function);if(s){var l=s(a);if(l!=null){a.data("customValidationMessage",l);return false}}}return true},function(t,e){return $(e).data("customValidationMessage")})}}function r(){i();var r=$.validator;r=r.prototype;e=r.showLabel;r.showLabel=n;$.validator.addMethod("dateQ",function(e,n){return this.optional(n)||t.parseDate(e)!=false});$.validator.addMethod("hourAndMin",function(e,n){return this.optional(n)||!isNaN(t.parseHourAndMin(e))});$.validator.addMethod("dayHourAndMin",function(e,n){return this.optional(n)||!isNaN(t.parseDayHourAndMin(e))});$.validator.addMethod("decimalQ",function(e,n){return this.optional(n)||!isNaN(t.parseDecimal(e))});$.validator.addMethod("integerQ",function(e,n){return this.optional(n)||!isNaN(t.parseInteger(e))});var a=$.validator.methods["email"];$.validator.addMethod("email",function(e,n){if(!t.Config.emailAllowOnlyAscii)return a.call(this,e,n);return this.optional(n)||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)});$.validator.addMethod("emailMultiple",function(t,e){var n=this.optional(e);if(n)return n;if(t.indexOf(";")>=0)t=t.split(";");else t=t.split(",");for(var i=0;i<t.length;i++){n=$.validator.methods["email"].call(this,t[i],e);if(!n)return n}return n});$.validator.addMethod("anyvalue",function(t,e){return true});var o=$.validator.defaults;o.ignoreTitle=true;o.onchange=function(t){this.element(t)};r.oldinit=r.init;r.init=function(){r.oldinit.call(this);function t(t){if(this.form==null)return;var e=$.data(this.form,"validator"),n="on"+t.type.replace(/^validate/,"");e&&e.settings[n]&&e.settings[n].call(e,this)}function e(e){var n=this[0];if(!$.data(n,"changebound")){$(n).change(t);$.data(n,"changebound",true)}}$(this.currentForm).on(":text, :password, :file, select, textarea","focusin.validate",e)};r.oldfocusInvalid=r.focusInvalid;r.focusInvalid=function(){if(this.settings.abortHandler)this.settings.abortHandler(this);this.oldfocusInvalid.call(this)};r.oldstopRequest=r.focusInvalid;r.stopRequest=function(t,e){var n=this.formSubmitted;this.oldfocusInvalid.call(this,[t,e]);if(!e&&this.pendingRequest==0&&n&&this.settings.abortHandler){this.settings.abortHandler(this)}};r.resetAll=function(){this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)};jQuery(function(){$.extend($.validator.messages,{email:t.text("Validation.Email"),required:t.text("Validation.Required"),minlength:t.text("Validation.MinLength"),maxlength:t.text("Validation.MaxLength"),digits:t.text("Validation.Digits"),range:t.text("Validation.Range"),xss:t.text("Validation.Xss"),dateQ:t.text("Validation.DateInvalid"),decimalQ:t.text("Validation.Decimal"),integerQ:t.text("Validation.Integer"),url:t.text("Validation.Url")})})}function a(t){t.settings.abortHandler=null;t.settings.submitHandler=function(){return false}}t.validatorAbortHandler=a;function o(e){return $.extend({ignore:":hidden",meta:"v",errorClass:"error",errorPlacement:function(t,e){var n=null;var i=e.attr("data-vx-id");if(i){n=$("#"+i);if(!n.length)n=null;else n=n[0]}if(n==null){n=e.parents("div.field");if(n.length){var r=$("div.vx",n[0]);if(r.length)n=r[0]}else n=e.parent()}t.appendTo(n)},submitHandler:function(){return false},invalidHandler:function(){t.notifyError(t.text("Validation.InvalidFormMessage"))},success:function(t){t.addClass("checked")}},e)}t.validateOptions=o;if(window["jQuery"]&&window["jQuery"]["validator"])r();else if(window["jQuery"]){jQuery(function(t){if(t.validator)r()})}function s(){var e=t.Culture.dateOrder;var n=t.Culture.dateSeparator;var i=($("html").attr("lang")||"en").toLowerCase();if(!$.datepicker.regional[i]){i=i.split("-")[0];if(!$.datepicker.regional[i]){i="en"}}$.datepicker.setDefaults($.datepicker.regional["en"]);$.datepicker.setDefaults($.datepicker.regional[i]);$.datepicker.setDefaults({dateFormat:e=="mdy"?"mm"+n+"dd"+n+"yy":e=="ymd"?"yy"+n+"mm"+n+"dd":"dd"+n+"mm"+n+"yy",buttonImage:t.resolveUrl("~/content/serenity/images/datepicker.png"),buttonImageOnly:true,showOn:"both",showButtonPanel:true,changeMonth:true,changeYear:true})}if(window["jQuery"]&&window["jQuery"]["datepicker"]&&window["jQuery"]["datepicker"]["regional"]&&window["jQuery"]["datepicker"]["regional"]["en"]){s()}else{jQuery(function(t){if(t.datepicker)s()})}function l(){$.ui.dialog.prototype._allowInteraction=function(t){if($(t.target).closest(".ui-dialog").length){return true}return!!$(t.target).closest(".ui-datepicker, .select2-drop, .cke, .cke_dialog, #support-modal").length}}if(window["jQuery"]&&window["jQuery"]["ui"]){l()}else{jQuery(function(t){if(window["jQuery"]["ui"])l()})}function u(){ss.Exception.prototype.toString=function(){return this.get_message()}}if(ss&&ss.Exception)u();else{jQuery(function(t){if(ss&&ss.Exception)u()})}})(Q||(Q={}));