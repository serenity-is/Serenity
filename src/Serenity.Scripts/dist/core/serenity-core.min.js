var __decorate=this&&this.__decorate||function(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)if(o=e[u])i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i;return a>3&&i&&Object.defineProperty(t,r,i),i};var __skipExtends={__metadata:true,__typeName:true,__componentFactory:true};var __extends=function(e,t){for(var r in t)if(t.hasOwnProperty(r)&&__skipExtends[r]!==true)e[r]=t[r];function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)};var __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))e[a]=t[a]}return e};var __rest=function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)if(t.indexOf(n[a])<0)r[n[a]]=e[n[a]];return r};var __spreadArrays=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,a++)n[a]=i[o];return n};if(typeof Promise==="undefined"){if(typeof RSVP!=="undefined")Promise=RSVP;else if(typeof $!=="undefined"){Promise=$.Deferred;Promise.resolve=function(e){return $.Deferred().resolveWith(e)}}}var Serenity;(function(e){var t=function(){function e(){}return e}();e.ISlickFormatter=t})(Serenity||(Serenity={}));var globalObj=typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:this;var Q;(function(e){e.types={};function t(e,t){var r=t.split(".");for(var n=0;n<r.length;n++){e=e[r[n]];if(e==null)return null}return e}e.getNested=t;e.getType=function(r,n){var a;if(n==null){a=e.types[r];if(a!=null||globalObj==null)return a;n=globalObj}a=t(n,r);if(typeof a!=="function")return null;return a};e.getTypeFullName=function(e){return e.__typeName||e.name||(e.toString().match(/^\s*function\s*([^\s(]+)/)||[])[1]||"Object"};e.getTypeName=function(t){var r=e.getTypeFullName(t);var n=r.indexOf("[");var a=r.lastIndexOf(".",n>=0?n:r.length);return a>0?r.substr(a+1):r};e.getInstanceType=function(e){if(e==null)throw new n("Cannot get type of null");try{return e.constructor}catch(t){return Object}};e.isAssignableFrom=function(e,t){return e===t||typeof e.isAssignableFrom==="function"&&e.isAssignableFrom(t)||t.prototype instanceof e};e.isInstanceOfType=function(t,r){if(t==null)return false;if(typeof r.isInstanceOfType==="function")return r.isInstanceOfType(t);return e.isAssignableFrom(r,e.getInstanceType(t))};e.safeCast=function(t,r){return e.isInstanceOfType(t,r)?t:null};e.cast=function(t,r){if(t==null)return t;else if(e.isInstanceOfType(t,r))return t;throw new o("Cannot cast object to type "+e.getTypeFullName(r))};e.getBaseType=function(e){if(e===Object||e.__interface){return null}else if(Object.getPrototypeOf){return Object.getPrototypeOf(e.prototype).constructor}else{var t=e.prototype;if(Object.prototype.hasOwnProperty.call(t,"constructor")){try{var r=t.constructor;delete t.constructor;return t.constructor}finally{t.constructor=r}}return t.constructor}};e.getAttributes=function(t,r,n){var a=[];if(n){var i=e.getBaseType(t);if(i){var o=e.getAttributes(i,r,true);for(var u=0;u<o.length;u++){var l=e.getInstanceType(o[u]);a.push(o[u])}}}if(t.__metadata&&t.__metadata.attr){for(var u=0;u<t.__metadata.attr.length;u++){var o=t.__metadata.attr[u];if(r==null||e.isInstanceOfType(o,r)){var l=e.getInstanceType(o);for(var s=a.length-1;s>=0;s--){if(e.isInstanceOfType(a[s],l))a.splice(s,1)}a.push(o)}}}return a};e.getMembers=function(t,r){var n=[];var a=e.getBaseType(t);if(a)n=e.getMembers(a,r&~1);if(t.__metadata&&t.__metadata.members){for(var i=0,o=t.__metadata.members;i<o.length;i++){var u=o[i];if(r&u.type)n.push(u)}}return n};e.getTypes=function(t){var r=[];if(!t){for(var n in e.types){if(e.types.hasOwnProperty(n))r.push(e.types[n])}}else{var a=function(e,t){for(var n in e){if(e.hasOwnProperty(n))a(e[n],n)}if(typeof e==="function"&&t.charAt(0).toUpperCase()===t.charAt(0)&&t.charAt(0).toLowerCase()!==t.charAt(0))r.push(e)};a(t,"")}return r};var r=function(e){__extends(t,e);function t(t){var r=e.call(this,t)||this;r.name="Exception";return r}return t}(Error);e.Exception=r;var n=function(e){__extends(t,e);function t(t){var r=e.call(this,t||"Object is null.")||this;r.name="NullReferenceException";return r}return t}(r);e.NullReferenceException=n;var a=function(e){__extends(t,e);function t(t,r){var n=e.call(this,(r||"Value cannot be null.")+"\nParameter name: "+t)||this;n.name="ArgumentNullException";return n}return t}(r);e.ArgumentNullException=a;var i=function(e){__extends(t,e);function t(t,r){var n=e.call(this,(r!==null&&r!==void 0?r:"Value is out of range.")+(t?"\nParameter name: "+t:""))||this;n.name="ArgumentNullException";return n}return t}(r);e.ArgumentOutOfRangeException=i;var o=function(e){__extends(t,e);function t(t){var r=e.call(this,t)||this;r.name="InvalidCastException";return r}return t}(r);e.InvalidCastException=o;e.clearKeys=function(e){for(var t in e){if(e.hasOwnProperty(t))delete e[t]}};e.delegateCombine=function(e,t){if(!e){if(!t._targets){return t}return t}if(!t){if(!e._targets){return e}return e}var r=e._targets?e._targets:[null,e];var n=t._targets?t._targets:[null,t];return s(r.concat(n))};var u;(function(e){e.toString=function(e,t){var r=e.prototype;if(t===0||!e.__metadata||!e.__metadata.enumFlags){for(var n in r){if(r[n]===t){return n}}return t==null?"":t.toString()}else{var a=[];for(var n in r){if(r[n]&t){a.push(n)}else a.push(t==null?"":t.toString())}return a.join(" | ")}};e.getValues=function(e){var t=[];var r=e.prototype;for(var n in r){if(r.hasOwnProperty(n))t.push(r[n])}return t}})(u=e.Enum||(e.Enum={}));function l(e,t,r){for(var n=0;n<e.length;n+=2){if(e[n]===t&&e[n+1]===r){return true}}return false}var s=function(e){var t=function(){if(e.length==2){return e[1].apply(e[0],arguments)}else{var t=e.slice();for(var r=0;r<t.length;r+=2){if(l(e,t[r],t[r+1])){t[r+1].apply(t[r],arguments)}}return null}};t._targets=e;return t};e.delegateRemove=function(e,t){if(!e||e===t){return null}if(!t){return e}var r=e._targets;var n=null;var a;if(t._targets){n=t._targets[0];a=t._targets[1]}else{a=t}for(var i=0;i<r.length;i+=2){if(r[i]===n&&r[i+1]===a){if(r.length==2){return null}var o=r.slice();o.splice(i,2);return s(o)}}return e};e.isEnum=function(e){return!!e.__enum};function f(e,t){for(var r=0;r<t.length-1;r+=2){(function(t,r){Object.defineProperty(e.prototype,t,{get:function(){return this.w(t,r)},enumerable:true,configurable:true})})(t[r],t[r+1])}}e.initFormType=f;function c(e,t,r,n){r=r||"get_"+t;n=n||"set_"+t;Object.defineProperty(e.prototype,t,{get:function(){return this[r]()},set:function(e){return this[n](e)},configurable:true,enumerable:true})}e.prop=c;function d(t,r,n){if(!t)return;for(var a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];if(o.charAt(0)<"A"||o.charAt(0)>"Z")continue;if(o.indexOf("$")>=0)continue;if(o=="prototype")continue;if(!t.hasOwnProperty(o))continue;var u=t[o];if($.isArray(u)||t instanceof Date)continue;var l=typeof u;if(l=="string"||l=="number")continue;if($.isFunction(u)||u.__enum&&u.__register){if(u.hasOwnProperty("__typeName")&&!u.__register)continue;if(!u.__interfaces&&u.prototype.format&&o.substr(-9)=="Formatter"){u.__class=true;u.__interfaces=[Serenity.ISlickFormatter]}if(!u.__class){var s=e.getBaseType(u);if(s&&s.__class)u.__class=true}if(u.__class||u.__enum||u.__interface){u.__typeName=r+o;e.types[r+o]=u}delete u.__register}if(n>0)d(u,r+o+".",n-1)}}e.initializeTypes=d})(Q||(Q={}));var Q;(function(e){function t(e,t){return e!=null?e:t}e.coalesce=t;function r(e){return e!=null}e.isValue=r;function n(e,t){for(var r=0,n=e;r<n.length;r++){var a=n[r];if(t(a))return true}return false}e.any=n;function a(e,t){var r=0;for(var n=0,a=e;n<a.length;n++){var i=a[n];if(t(i))r++}return r}e.count=a;function i(e,t){for(var r=0,n=e;r<n.length;r++){var a=n[r];if(t(a))return a}throw new Error("first:No element satisfies the condition.!")}e.first=i;function o(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}e.indexOf=o;function u(e,t,r){if(e.insert)e.insert(t,r);else if(Object.prototype.toString.call(e)==="[object Array]")e.splice(t,0,r);else throw new Error("Object does not support insert!")}e.insert=u;function l(e){return Object.prototype.toString.call(e)==="[object Array]"}e.isArray=l;function s(e,t){var r;var n=false;for(var a=0,i=e;a<i.length;a++){var o=i[a];if(t(o)){if(n)throw new Error("single:sequence contains more than one element.");n=true;r=o}}if(!n)throw new Error("single:No element satisfies the condition.");return r}e.single=s;function f(e,t){var r={};for(var n=0,a=e;n<a.length;n++){var i=a[n];var o=t(i)||"";var u=r[o];if(!u){u=r[o]=[]}u.push(i)}return r}e.toGrouping=f;function c(t,r){var n={byKey:Object.create(null),inOrder:[]};for(var a=0;a<t.length;a++){var i=t[a];var o=e.coalesce(r(i),"");var u=n.byKey[o];if(u===undefined){u={order:n.inOrder.length,key:o,items:[i],start:a};n.byKey[o]=u;n.inOrder.push(u)}else{u.items.push(i)}}return n}e.groupBy=c;function d(e,t){for(var r=0,n=e;r<n.length;r++){var a=n[r];if(t(a))return a}}e.tryFirst=d;function p(e,t){if(t==null||!t.length)return true;if(t.length>e.length)return false;return e.substr(e.length-t.length)==t}e.endsWith=p;function h(e){return e==null||e.length===0}e.isEmptyOrNull=h;function g(e){return F(e)==null}e.isTrimmedEmpty=g;function v(e,t,r){if(r===void 0){r=" "}if(e["padStart"])return e["padStart"](t,r);e=e.toString();while(e.length<t)e=r+e;return e}e.padLeft=v;function m(e,t){if(t==null||!t.length)return true;if(t.length>e.length)return false;return e.substr(0,t.length)==t}e.startsWith=m;function y(t){return e.replaceAll(e.replaceAll(C(t),"\r\n"," "),"\n"," ").trim()}e.toSingleLine=y;e.today=function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())};e.trimEnd=function(e){return e.replace(/\s*$/,"")};e.trimStart=function(e){return e.replace(/^\s*/,"")};function b(e){if(e==null)return"";return e.replace(new RegExp("^\\s+|\\s+$","g"),"")}e.trim=b;function C(e){if(e==null||e.length===0)return"";return b(e)}e.trimToEmpty=C;function F(e){e=b(e);if(e.length===0)return null;return e}e.trimToNull=F;function x(e,t,r){e=e||"";return e.split(t).join(r)}e.replaceAll=x;function w(e,t){var r=e.toString();while(r.length<t)r="0"+r;return r}e.zeroPad=w;function T(e,t,r){var n,a,i,o,u;if(null==t)t=100;function l(){var s=Date.now()-o;if(s<t&&s>=0){n=setTimeout(l,t-s)}else{n=null;if(!r){u=e.apply(i,a);i=a=null}}}var s=function(){i=this;a=arguments;o=Date.now();var s=r&&!n;if(!n)n=setTimeout(l,t);if(s){u=e.apply(i,a);i=a=null}return u};s.clear=function(){if(n){clearTimeout(n);n=null}};s.flush=function(){if(n){u=e.apply(i,a);i=a=null;clearTimeout(n);n=null}};return s}e.debounce=T;function S(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];return e}e.extend=S;function O(t,r,n){if(r!=null||n!=null){return e.extend(e.extend(e.deepClone(t||{}),e.deepClone(r||{})),e.deepClone(n||{}))}if(!t)return t;var a;var i=Array.isArray(t)?[]:{};for(var o in t){a=t[o];i[o]=typeof a==="object"?O(a):a}return i}e.deepClone=O})(Q||(Q={}));var Q;(function(e){e.Invariant={decimalSeparator:".",groupSeparator:",",decimalDigits:2,negativeSign:"-",positiveSign:"+",percentSymbol:"%",currencySymbol:"$",dateSeparator:"/",dateOrder:"mdy",dateFormat:"MM/dd/yyyy",dateTimeFormat:"MM/dd/yyyy HH:mm:ss",amDesignator:"AM",pmDesignator:"PM",timeSeparator:":",firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minimizedDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],stringCompare:function(e,t){return e<t?-1:e>t?1:0}};function t(e){var t={};for(var r=0;r<e.length;r++){t[e.charAt(r)]=r+1}return function(e,r){e=e||"";r=r||"";if(e==r)return 0;for(var n=0,a=Math.min(e.length,r.length);n<a;n++){var i=e.charAt(n),o=r.charAt(n);if(i===o)continue;var u=t[i],l=t[o];if(u!=null&&l!=null)return u<l?-1:1;var s=i.localeCompare(o);if(s==0)continue;return s}return e.localeCompare(r)}}e.compareStringFactory=t;e.Culture={decimalSeparator:".",groupSeparator:",",dateSeparator:"/",dateOrder:"dmy",dateFormat:"dd/MM/yyyy",dateTimeFormat:"dd/MM/yyyy HH:mm:ss",stringCompare:t("AaBbCcÇçFfGgĞğHhIıİiJjKkLlMmNnOoÖöPpRrSsŞşTtUuÜüVvYyZz")};(function(){var t;for(t in e.Invariant)if(e.Culture[t]===undefined&&e.Invariant.hasOwnProperty(t))e.Culture[t]=e.Invariant[t];if(typeof $!="undefined"&&(t=e.trimToNull($("script#ScriptCulture").html()))!=null){var r=$.parseJSON(t);if(r.DecimalSeparator!=null)e.Culture.decimalSeparator=r.DecimalSeparator;if(r.GroupSeparator!=null&&r.GroupSeparator!=e.Culture.decimalSeparator)e.Culture.groupSeparator=r.GroupSeparator;else if(e.Culture.groupSeparator==e.Culture.decimalSeparator)e.Culture.groupSeparator=e.Culture.decimalSeparator=="."?",":".";delete r.groupSeparator;delete r.decimal;for(t in r){if(e.Culture[t]===undefined&&r.hasOwnProperty(t))e.Culture[t.charAt(0).toLowerCase()+t.substr(1)]=r[t]}}})();function r(e){if(!e)return e;return e.replace(/i/g,"İ").replace(/ı/g,"I").toUpperCase()}e.turkishLocaleToUpper=r;e.turkishLocaleCompare=e.Culture.stringCompare;function n(t,r,n,a){var i=null;var o=t.indexOf(r);if(o>0){i=t.substr(o);t=t.substr(0,o)}var u=e.startsWith(t,a);if(u){t=t.substr(1)}var l=3;if(t.length<l){return(u?a:"")+(i?t+i:t)}var s=t.length;var f="";var c=false;while(!c){var d=l;var p=s-d;if(p<0){l+=p;d+=p;p=0;c=true}if(!d)break;var h=t.substr(p,d);if(f.length)f=h+n+f;else f=h;s-=d}if(u)f="-"+f;return i?f+i:f}var a=/\{\{|\}\}|\{[^\}\{]+\}/g;function i(t,r,n,i){return t.replace(a,function(t){if(t==="{{"||t==="}}")return t.charAt(0);var a=parseInt(t.substr(1),10);var o=n[a+i];if(o==null){return""}var u=e.getInstanceType(o);if(u==Number||u==Date){var s=null;var f=t.indexOf(":");if(f>0){s=t.substring(f+1,t.length-1)}return l(o,s,r)}else{return o.toString()}})}function o(t){var r=[];for(var n=1;n<arguments.length;n++){r[n-1]=arguments[n]}return i(t,e.Culture,arguments,1)}e.format=o;function u(e,t){var r=[];for(var n=2;n<arguments.length;n++){r[n-2]=arguments[n]}return i(e,t,arguments,2)}e.localeFormat=u;function l(t,r,n){if(typeof t==="number")return e.formatNumber(t,r,n);else if(Object.prototype.toString.call(t)==="[object Date]")return e.formatDate(t,r,n);else return t.format(r)}e.round=function(e,t,r){var n=Math.pow(10,t||0);e*=n;var a=e>0|-(e<0);if(e%1===.5*a){var i=Math.floor(e);return(i+(r?a>0:i%2*a))/n}return Math.round(e)/n};e.trunc=function(e){return e!=null?e>0?Math.floor(e):Math.ceil(e):null};function s(t,r,a,i){var o,l,s,f,c,p;if(t==null)return"";var h=typeof a!=="string"?a!==null&&a!==void 0?a:e.Culture:{decimalSeparator:a,groupSeparator:i!==null&&i!==void 0?i:a==","?".":","};if(isNaN(t)){return(o=h.nanSymbol)!==null&&o!==void 0?o:e.Culture.nanSymbol}if(r==null||r.length==0||r=="i"){return t.toString()}var g=(l=h.decimalSeparator)!==null&&l!==void 0?l:e.Culture.decimalSeparator;i=(s=i!==null&&i!==void 0?i:h.groupSeparator)!==null&&s!==void 0?s:e.Culture.groupSeparator;var v=(f=h.negativeSign)!==null&&f!==void 0?f:e.Culture.negativeSign;var m="";var y=-1;if(r.length>1){y=parseInt(r.substr(1),10)}var b=r.charAt(0);switch(b){case"d":case"D":m=parseInt(Math.abs(t)).toString();if(y!=-1)m=e.padLeft(m,y,"0");if(t<0)m=v+m;break;case"x":case"X":m=parseInt(Math.abs(t)).toString(16);if(b=="X")m=m.toUpperCase();if(y!=-1)m=e.padLeft(m,y,"0");break;case"e":case"E":if(y==-1)m=t.toExponential();else m=t.toExponential(y);if(b=="E")m=m.toUpperCase();break;case"f":case"F":case"n":case"N":if(y==-1){y=(c=h.decimalDigits)!==null&&c!==void 0?c:e.Culture.decimalDigits}m=t.toFixed(y).toString();if(y&&g!="."){var C=m.indexOf(".");m=m.substr(0,C)+g+m.substr(C+1)}if(b=="n"||b=="N"){m=n(m,g,i,v)}break;case"c":case"C":case"p":case"P":if(y==-1){y=(p=h.decimalDigits)!==null&&p!==void 0?p:e.Culture.decimalDigits}if(b==="p"||b=="P")t*=100;m=Math.abs(t).toFixed(y).toString();if(y&&g!="."){var C=m.indexOf(".");m=m.substr(0,C)+g+m.substr(C+1)}m=n(m,g,i,v);m=u("0",h,m);break;default:var F="";var x="";var w="";var T=false;var S=false;for(var O=0;O<r.length;O++){var k=r.charAt(O);if(k=="'"){S=!S;continue}else if(!S){if(k=="\\"){var k=r.charAt(O+1)||"";O++}else if(k=="#"||k==","||k=="."||k=="0"){T=true;x+=k;continue}}T?w+=k:F+=k}r=x;var D="";if(r.indexOf(".")>-1){var $=g;var A=r.substring(r.lastIndexOf(".")+1);t=d(t,A.length);var M=t%1;var _=new String(M.toFixed(A.length));_=_.substring(_.lastIndexOf(".")+1);for(var E=0;E<A.length;E++){if(A.charAt(E)=="#"&&_.charAt(E)!="0"){$+=_.charAt(E);continue}else if(A.charAt(E)=="#"&&_.charAt(E)=="0"){var N=_.substring(E);if(N.match("[1-9]")){$+=_.charAt(E);continue}else break}else if(A.charAt(E)=="0")$+=_.charAt(E);else $+=A.charAt(E)}D+=$}else t=Math.round(t);var I=Math.floor(t);if(t<0)I=Math.ceil(t);var P="";if(r.indexOf(".")==-1)P=r;else P=r.substring(0,r.indexOf("."));var j="";if(!(I==0&&P.substr(P.length-1)=="#")){var L=new String(Math.abs(I));var Q=9999;if(P.lastIndexOf(",")!=-1)Q=P.length-P.lastIndexOf(",")-1;var H=0;for(var B=L.length-1;B>-1;B--){j=L.charAt(B)+j;H++;if(H==Q&&B!=0){j=i+j;H=0}}if(P.length>j.length){var R=P.indexOf("0");if(R!=-1){var U=P.length-R;var z=P.length-j.length-1;while(j.length<U){var W=P.charAt(z);if(W==",")W=i;j=W+j;z--}}}}if(!j&&P.indexOf("0",P.length-1)!==-1)j="0";D=j+D;if(t<0)D=v+D;if(D.lastIndexOf(g)==D.length-1){D=D.substring(0,D.length-1)}return F+D+w}return m}e.formatNumber=s;function f(t){t=e.trim(t.toString());var r=e.Culture.groupSeparator;if(t&&t.length&&t.indexOf(r)>0){t=t.replace(new RegExp("(\\b\\d{1,3})\\"+r+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!/^[-\+]?\d+$/.test(t))return NaN;return parseInt(t,10)}e.parseInteger=f;function c(t){if(t==null)return null;t=e.trim(t.toString());if(t.length==0)return null;var r=e.Culture.groupSeparator;if(t&&t.length&&t.indexOf(r)>0){t=t.replace(new RegExp("(\\b\\d{1,3})\\"+r+"(?=\\d{3}(\\D|$))","g"),"$1")}if(!new RegExp("^\\s*([-\\+])?(\\d*)\\"+e.Culture.decimalSeparator+"?(\\d*)\\s*$").test(t))return NaN;return parseFloat(t.toString().replace(e.Culture.decimalSeparator,"."))}e.parseDecimal=c;function d(e,t){var r=Math.pow(10,t||0);var n=(Math.round(e*r)/r).toString();if(t>0){var a=n.indexOf(".");if(a==-1){n+=".";a=0}else{a=n.length-(a+1)}while(a<t){n+="0";a++}}return parseFloat(n)}function p(e){if(e==null)return null;if(typeof e=="number")return e;e=$.trim(e);if(e==null||!e.length)return null;if(e.length>=15||!/^-?\d+$/.test(e))return e;var t=parseInt(e,10);if(isNaN(t))return e;return t}e.toId=p;var h=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|\//g;function g(t,r,n){var a,i,o,u,l,s,f,c,d,p,g,v,m;if(!t)return"";var y;if(typeof t=="string"){var b=e.parseDate(t,n==null?null:n.dateOrder);if(!b)return t;y=b}else y=t;if(r=="i")return y.toString();if(r=="id")return y.toDateString();if(r=="it")return y.toTimeString();if(n==null)n=e.Culture;if(r==null||r=="d")r=(a=n.dateFormat)!==null&&a!==void 0?a:e.Culture.dateFormat;else if(r.length==1){switch(r){case"g":r=((i=n.dateTimeFormat)!==null&&i!==void 0?i:e.Culture.dateTimeFormat).replace(":ss","");break;case"G":r=(o=n.dateTimeFormat)!==null&&o!==void 0?o:e.Culture.dateTimeFormat;break;case"s":r="yyyy-MM-ddTHH:mm:ss";break;case"d":r=(u=n.dateFormat)!==null&&u!==void 0?u:e.Culture.dateFormat;case"t":r=n.dateTimeFormat&&n.dateFormat?n.dateTimeFormat.replace(n.dateFormat+" ",""):"HH:mm";break;case"u":case"U":r=r=="u"?"yyyy-MM-ddTHH:mm:ss.fffZ":(l=n.dateTimeFormat)!==null&&l!==void 0?l:e.Culture.dateTimeFormat;y=new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds());break}}if(r.charAt(0)=="%"){r=r.substr(1)}var C=h;var F=[];C.lastIndex=0;while(true){var x=C.lastIndex;var w=C.exec(r);F.push(r.slice(x,w?w.index:r.length));if(!w){break}var T=w[0];var S=T;switch(T){case"/":S=(s=n.dateSeparator)!==null&&s!==void 0?s:e.Culture.dateSeparator;break;case"dddd":S=((f=n.dayNames)!==null&&f!==void 0?f:e.Culture.dayNames)[y.getDay()];break;case"ddd":S=((c=n.shortDayNames)!==null&&c!==void 0?c:e.Culture.shortDayNames)[y.getDay()];break;case"dd":S=e.padLeft(y.getDate().toString(),2,"0");break;case"d":S=y.getDate();break;case"MMMM":S=((d=n.monthNames)!==null&&d!==void 0?d:e.Culture.monthNames)[y.getMonth()];break;case"MMM":S=((p=n.shortMonthNames)!==null&&p!==void 0?p:e.Culture.shortMonthNames)[y.getMonth()];break;case"MM":S=e.padLeft(y.getMonth()+1,2,"0");break;case"M":S=y.getMonth()+1;break;case"yyyy":S=e.padLeft(y.getFullYear(),4,"0");break;case"yy":S=e.padLeft(y.getFullYear()%100,2,"0");break;case"y":S=y.getFullYear()%100;break;case"h":case"hh":S=y.getHours()%12;if(!S){S="12"}else if(T=="hh"){S=e.padLeft(S,2,"0")}break;case"HH":S=e.padLeft(y.getHours(),2,"0");break;case"H":S=y.getHours();break;case"mm":S=e.padLeft(y.getMinutes(),2,"0");break;case"m":S=y.getMinutes();break;case"ss":S=e.padLeft(y.getSeconds().toString(),2,"0");break;case"s":S=y.getSeconds();break;case"t":case"tt":S=y.getHours()<12?(g=n.amDesignator)!==null&&g!==void 0?g:e.Culture.amDesignator:(v=n.pmDesignator)!==null&&v!==void 0?v:e.Culture.pmDesignator;if(T=="t"){S=S.charAt(0)}break;case"fff":S=e.padLeft(y.getMilliseconds(),3,"0");break;case"ff":S=e.padLeft(y.getMilliseconds(),3).substr(0,2);break;case"f":S=e.padLeft(y.getMilliseconds(),3).charAt(0);break;case"z":case"Z":S=y.getTimezoneOffset()/60;S=(S>=0?"-":"+")+Math.floor(Math.abs(S));break;case"zz":case"zzz":S=y.getTimezoneOffset()/60;S=(S>=0?"-":"+")+Math.floor(e.padLeft(Math.abs(S),2,"0"));if(T=="zzz"){S+=((m=n.timeSeparator)!==null&&m!==void 0?m:e.Culture.timeSeparator)+Math.abs(e.padLeft(y.getTimezoneOffset()%60,2,"0"))}break;default:if(S.charAt(0)=="'"){S=S.substr(1,S.length-2).replace(/\\'/g,"'")}break}F.push(S)}return F.join("")}e.formatDate=g;function v(t){if(t===0)return"0";else if(!t)return"";var r=Math.floor(t/24/60);var n="";if(r>0){n+=r.toString()}var a=e.zeroPad(Math.floor(t%(24*60)/60),2)+":"+e.zeroPad(t%60,2);if(a!="00:00"){if(r>0)n+=".";n+=a}return n}e.formatDayHourAndMin=v;function m(e){if(e==null)return"";var t=function(e){return(e<10?"0":"")+e};var r=e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes());var n=Number(e.getUTCSeconds()+"."+(e.getUTCMilliseconds()<100?"0":"")+t(e.getUTCMilliseconds()));r+=":"+t(n)+"Z";return r}e.formatISODateTimeUTC=m;var y=/(\d{4,})(?:-(\d{1,2})(?:-(\d{1,2})(?:[T ](\d{1,2}):(\d{1,2})(?::(\d{1,2})(?:\.(\d+))?)?(?:(Z)|([+-])(\d{1,2})(?::(\d{1,2}))?)?)?)?)?/;function b(e){if(!e||!e.length)return null;e=e+"";if(typeof e!="string"||e.length===0)return null;var t=e.match(y);if(typeof t=="undefined"||t===null)return null;return new Date(e+(e.length==10?"T00:00:00":""))}e.parseISODateTime=b;function C(t){var r=e.trim(t);if(r.length<4||r.length>5)return NaN;var n,a;if(r.charAt(1)==":"){n=f(r.substr(0,1));a=f(r.substr(2,2))}else{if(r.charAt(2)!=":")return NaN;n=f(r.substr(0,2));a=f(r.substr(3,2))}if(isNaN(n)||isNaN(a)||n<0||n>23||a<0||a>59)return NaN;return n*60+a}e.parseHourAndMin=C;function F(t){var r;var n=e.trim(t);if(!n)return NaN;var a=n.split(".");if(a.length==0||a.length>2)return NaN;if(a.length==1){r=f(a[0]);if(!isNaN(r))return r*24*60;return C(a[0])}else{r=f(a[0]);var i=C(a[1]);if(isNaN(r)||isNaN(i))return NaN;return r*24*60+i}}e.parseDayHourAndMin=F;function x(t,r){if(!t||!t.length)return null;if(t.length>=10&&t.charAt(4)==="-"&&t.charAt(7)==="-"&&(t.length===10||t.length>10&&t.charAt(10)==="T")){var n=e.parseISODateTime(t);if(n==null)return false;return n}t=e.trim(t);if(t.indexOf(" ")>0&&t.indexOf(":")>t.indexOf(" ")+1){var a=e.parseDate(t.substr(0,t.indexOf(" ")));if(!a)return false;return e.parseISODateTime(e.formatDate(a,"yyyy-MM-dd")+"T"+e.trim(t.substr(t.indexOf(" "+1))))}var i;var o;var u,l,s;o=w(t);if(!o)return false;if(o.length==3){r=r||e.Culture.dateOrder;switch(r){case"dmy":u=parseInt(o[0],10);l=parseInt(o[1],10)-1;s=parseInt(o[2],10);break;case"ymd":u=parseInt(o[2],10);l=parseInt(o[1],10)-1;s=parseInt(o[0],10);break;case"mdy":default:u=parseInt(o[1],10);l=parseInt(o[0],10)-1;s=parseInt(o[2],10);break}if(isNaN(u)||isNaN(l)||isNaN(s)||u<1||u>31||l<0||l>11||s>9999||s<0)return false;if(s<100){var f=(new Date).getFullYear();var c=f%100+10;s+=f-f%100+(s<=c?0:-100)}try{i=new Date(s,l,u);if(isNaN(i.getFullYear()))return false}catch(d){return false}}else if(o.length==1){try{i=new Date(o[0]);if(isNaN(i.getFullYear()))return false}catch(d){return false}}return i}e.parseDate=x;function w(t){t=e.trim(t);if(!t.length)return;if(t.indexOf("/")>=0)return t.split("/");else if(t.indexOf(".")>=0)return t.split(".");else if(t.indexOf("-")>=0)return t.split("-");else if(t.indexOf("\\")>=0)return t.split("\\");else return[t]}e.splitDateString=w})(Q||(Q={}));var Q;(function(e){function t(e){var t=u.$table[e];if(t==null){t=e||""}return t}e.text=t;function r(e){return function(r){return t("Db."+e+"."+r)}}e.dbText=r;function n(t){return function(r,n){if(r!=null&&!e.startsWith(r,"`")){var a=e.tryGetText(r);if(a!=null){return a}}if(r!=null&&e.startsWith(r,"`")){r=r.substr(1)}if(!e.isEmptyOrNull(t)){var i=typeof n=="function"?n(t):t+n;var o=e.tryGetText(i);if(o!=null){return o}}return r}}e.prefixedText=n;function a(e){return u.$table[e]}e.tryGetText=a;function i(e){return function(r){return t("Db."+e+"."+r)}}e.dbTryText=i;function o(t,r,n){if(typeof window!="undefined"&&window["Proxy"]){return new window["Proxy"](t,{get:function(a,i){var u=n[i];if(u==null)return;if(typeof u=="number")return e.text(r+i);else{var l=t[i];if(l!=null)return l;t[i]=l=o({},r+i+".",u);return l}},ownKeys:function(e){return Object.keys(n)}})}else{for(var a=0,i=Object.keys(n);a<i.length;a++){var u=i[a];if(typeof n[u]=="number")Object.defineProperty(t,u,{get:function(){return e.text(r+u)}});else t[u]=o({},r+u+".",n[u])}return t}}e.proxyTexts=o;var u=function(){function e(e){this.key=e}e.add=function(t,r){if(!t){return}r=r||"";for(var n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];var o=r+i;var u=t[i];if(typeof u==="object"){e.add(u,o+".")}else{e.$table[o]=u}}};e.prototype.get=function(){var t=e.$table[this.key];if(t==null){t=this.key||""}return t};e.prototype.toString=function(){var t=e.$table[this.key];if(t==null){t=this.key||""}return t};e.$table={};e.empty=new e("");e.initializeTextClass=function(t,r){var n=Object.keys(t).slice();for(var a=0;a<n.length;a++){var i=n[a];var o=t[i];if(o instanceof e){var u=o;var l=r+i;e.$table[l]=u.key;t[i]=new e(l)}}};e.getDefault=function(t,r){var n=e.$table[t];if(n==null){n=r;if(n==null){n=t||""}}return n};return e}();e.LT=u})(Q||(Q={}));var Q;(function(e){var t=function(){function t(e,t){this.items=[];this.itemById={};e=e||{};this.textFormatter=e.textFormatter;this.idField=e.idField;this.parentIdField=e.parentIdField;this.textField=e.textField;this.textFormatter=e.textFormatter;if(t!=null)this.update(t)}t.prototype.update=function(t){this.items=[];this.itemById={};if(t){for(var r=0,n=t;r<n.length;r++){var a=n[r];this.items.push(a)}}var i=this.idField;if(!e.isEmptyOrNull(i)){for(var o=0,u=this.items;o<u.length;o++){var l=u[o];var s=l[i];if(s!=null){this.itemById[s]=l}}}};t.prototype.get_idField=function(){return this.idField};t.prototype.get_parentIdField=function(){return this.parentIdField};t.prototype.get_textField=function(){return this.textField};t.prototype.get_textFormatter=function(){return this.textFormatter};t.prototype.get_itemById=function(){return this.itemById};t.prototype.get_items=function(){return this.items};return t}();e.Lookup=t})(Q||(Q={}));var Q;(function(e){var t=0;function r(e){if(t>0){t++;return}if($.blockUI){$.blockUI&&$.blockUI(e)}else{$('<div class="blockUI blockOverlay" style="z-index: 2000; border: none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0; cursor: wait; position: fixed;"></div>').appendTo(document.body)}t++}function n(t){t=e.extend({baseZ:2e3,message:"",overlayCSS:{opacity:"0.0",zIndex:2e3,cursor:"wait"},fadeOut:0},t);if(t.useTimeout){window.setTimeout(function(){r(t)},0)}else{r(t)}}e.blockUI=n;function a(){if(t>1){t--;return}t--;if($.unblockUI)$.unblockUI({fadeOut:0});else $(document.body).children(".blockUI.blockOverlay").remove()}e.blockUndo=a})(Q||(Q={}));var Q;(function(e){function t(e,t,r){$("<option/>").val(t).text(r).appendTo(e)}e.addOption=t;function r(r){t(r,"",e.text("Controls.SelectEditor.EmptyItemText"))}e.addEmptyOption=r;function n(e){e.html("")}e.clearOptions=n;function a(t,r){var n=t.attr("id");if(e.isEmptyOrNull(n)){return $("#"+r)}var a=$("#"+n+r);if(a.length>0){return a}a=$("#"+n+"_"+r);if(a.length>0){return a}while(true){var i=n.lastIndexOf("_");if(i<=0){return $("#"+r)}n=n.substr(0,i);a=$("#"+n+"_"+r);if(a.length>0){return a}}}e.findElementWithRelativeId=a;function i(e){switch(e){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;";case"'":return"&apos;";case'"':return"&quot;"}return e}var o=/[><&'"]/g;function u(e){var t=e==null?"":e.toString();if(o.test(t)){return t.replace(o,i)}return t}e.attrEncode=u;function l(e){switch(e){case"&":return"&amp;";case">":return"&gt;";case"<":return"&lt;"}return e}function s(e){var t=e==null?"":e.toString();if(new RegExp("[><&]","g").test(t)){return t.replace(new RegExp("[><&]","g"),l)}return t}e.htmlEncode=s;function f(t,r){if(!t||t.indexOf("{{")<0){return t}if(!$.templates||!$.views){throw new e.Exception("Please make sure that jsrender.js is included in the page!")}r=r||{};var n=$.templates(t);$.views.converters({text:e.text},n);return n.render(r)}e.jsRender=f;function c(e){if(typeof console!=="undefined"&&console.log)console.log(e)}e.log=c;function d(){return $("<div/>").appendTo(document.body)}e.newBodyDiv=d;function p(e){return $("<i/>").append(e.eq(0).clone()).html()}e.outerHtml=p})(Q||(Q={}));var Q;(function(e){if(typeof $!=="undefined"&&$.fn&&$.fn.button&&$.ui&&$.ui.button&&$.fn.button.noConflict){$.fn.btn=$.fn.button.noConflict()}function t(t){if(!t)return null;if(e.startsWith(t,"fa-"))return"fa "+t;if(e.startsWith(t,"glyphicon-"))return"glyphicon "+t;return t}function r(t,r,n){var a=e.extend({modal:true,width:"40%",maxWidth:450,minWidth:180,resizable:false,open:function(){if(t.onOpen)t.onOpen.call(this)},close:function(){$(this).dialog("destroy");if(t.onClose)t.onClose.call(this,t.result)}},t);a.dialogClass="s-MessageDialog"+(n?" "+n:"");if(t.buttons){a.buttons=t.buttons.map(function(e){var r=s(e);r.click=function(r){t.result=e.result;$(this).dialog("close");e.click&&e.click.call(this,r)};return r})}return $("<div>"+r+"</div>").dialog(a)}var n;function a(){if(n!=null)return n;return n=!!($.fn.modal&&$.fn.modal.Constructor&&$.fn.modal.Constructor.VERSION&&($.fn.modal.Constructor.VERSION+"").charAt(0)=="3")}e.isBS3=a;var i={AlertTitle:"Alert",InformationTitle:"Information",WarningTitle:"Warning",ConfirmationTitle:"Confirm",OkButton:"OK",YesButton:"Yes",NoButton:"No",CancelButton:"Cancel",CloseButton:"Close"};function o(t){var r;return(r=e.tryGetText("Dialogs."+t))!==null&&r!==void 0?r:i[t]}function u(e,t,r){var n='<button type="button" class="close" data-dismiss="modal" aria-label="'+o("CloseButton")+'">'+'<span aria-hidden="true">&times;</span></button>';return'<div class="modal '+r+'" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                '+(a()?n:"")+'<h5 class="modal-title">'+e+"</h5>"+(a()?"":n)+'\n            </div>\n            <div class="modal-body">'+t+'</div>\n            <div class="modal-footer"></div>\n        </div>\n    </div>\n</div>'}e.bsModalMarkup=u;
function l(r){var n=r.htmlEncode==null||r.htmlEncode?e.htmlEncode(r.text):r.text;var a=t(r.icon);if(a!=null)n='<i class="'+a+"><i>"+(n?" "+n:"");return'<button class="btn '+(r.cssClass?r.cssClass:"")+'"'+(r.hint?' title="'+e.attrEncode(r.hint)+'"':"")+">"+n+"</button>"}e.dialogButtonToBS=l;function s(r){var n=r.htmlEncode==null||r.htmlEncode?e.htmlEncode(r.text):r.text;var a=t(r.icon);if(a!=null)n='<i class="'+a+"><i> ";return{text:n,attr:!r.cssClass?undefined:{"class":r.cssClass},click:r.click}}e.dialogButtonToUI=s;function f(e,t,r){var n=u(e.title,t,"s-MessageModal"+(r?" "+r:""));var a=$(n).eq(0).appendTo(document.body);if(e.onOpen)a.one("shown.bs.modal",e.onOpen);if(e.onClose)a.one("hidden.bs.modal",function(t){return e.onClose(e.result)});var i=a.find(".modal-footer");function o(t){var r=this;return $(l(t)).appendTo(i).click(function(n){e.result=t.result;a.modal("hide");t.click&&t.click.call(r,n)})}if(e.buttons)for(var s=0,f=e.buttons;s<f.length;s++){var c=f[s];o(c)}a.modal({backdrop:false,show:true})}var c;function d(){if(c==null){c=typeof $==="undefined"||(!$.ui||!$.ui.dialog)&&(!$.fn||!$.fn.modal)}return c}function p(t){return!!(!$.ui||!$.ui.dialog||e.Config.bootstrapMessages||t&&t.bootstrap)}function h(t,r){var n=r==null||r.htmlEncode==null||r.htmlEncode;if(n)t=e.htmlEncode(t);var a=r==null||r.preWrap==null&&n||r.preWrap;return'<div class="message"'+(a?' style="white-space: pre-wrap">':">")+t+"</div>"}function g(t,n){var a,i;if(d()){window.alert(t);return}var u=p(n);n=e.extend({htmlEncode:true,okButton:o("OkButton"),title:o("AlertTitle")},n);if(n.buttons==null){n.buttons=[];if(n.okButton==null||n.okButton){n.buttons.push({text:typeof n.okButton=="boolean"?o("OkButton"):n.okButton,cssClass:u?"btn-default":undefined,result:"ok"})}}t=h(t,n);if(u)f(n,t,(a=n.modalClass)!==null&&a!==void 0?a:"s-AlertModal");else r(n,t,(i=n.dialogClass)!==null&&i!==void 0?i:"s-AlertDialog")}e.alert=g;function v(t,n,a){var i,u;if(d()){if(window.confirm(t))n&&n();return}var l=p(a);a=e.extend({htmlEncode:true,yesButton:o("YesButton"),noButton:o("NoButton"),title:o("ConfirmationTitle")},a);if(a.buttons==null){a.buttons=[];if(a.yesButton==null||a.yesButton){a.buttons.push({text:typeof a.yesButton=="boolean"?o("YesButton"):a.yesButton,cssClass:l?"btn-primary":undefined,result:"yes",click:n})}if(a.noButton==null||a.noButton){a.buttons.push({text:typeof a.noButton=="boolean"?o("NoButton"):a.noButton,cssClass:l?"btn-default":undefined,result:"no",click:a.onNo})}if(a.cancelButton){a.buttons.push({text:typeof a.cancelButton=="boolean"?o("CancelButton"):a.cancelButton,cssClass:l?"btn-default":undefined,result:"cancel",click:a.onCancel})}}t=h(t,a);if(l)f(a,t,(i=a.modalClass)!==null&&i!==void 0?i:"s-ConfirmModal");else r(a,t,(u=a.dialogClass)!==null&&u!==void 0?u:"s-ConfirmDialog")}e.confirm=v;function m(t){if(d()){window.alert(t.html);return}if(p(t)){f({title:o("AlertTitle"),modalClass:"modal-lg",onOpen:function(){r=$(this).find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;r.open();r.write(a.html);r.close()}},'<div style="overflow: hidden"><iframe></iframe></div>',"s-IFrameModal");return}var r;var n=$('<div style="overflow: hidden"><iframe></iframe></div>');var a=e.extend({autoOpen:true,modal:true,width:"60%",height:"400",title:o("AlertTitle"),open:function(){r=n.find("iframe").css({border:"none",width:"100%",height:"100%"})[0].contentDocument;r.open();r.write(a.html);r.close()},close:function(){r.open();r.write("");r.close();n.dialog("destroy").html("")}},t);n.dialog(a)}e.iframeDialog=m;function y(t,r,n){if(d()){window.alert(t);r&&r();return}v(t,r,e.extend({title:o("InformationTitle"),dialogClass:"s-InformationDialog",modalClass:"s-InformationModal",yesButton:o("OkButton"),noButton:false},n))}e.information=y;function b(t,r){g(t,e.extend({title:o("WarningTitle"),dialogClass:"s-WarningDialog",modalClass:"s-WarningModal"},r))}e.warning=b})(Q||(Q={}));var Q;(function(e){e.defaultNotifyOptions={timeOut:3e3,showDuration:250,hideDuration:500,extendedTimeOut:500,positionClass:"toast-top-full-width"};function t(t){t=e.extend(e.extend({},e.defaultNotifyOptions),t);o(true);return t}function r(e,r,n){toastr.warning(e,r,t(n))}e.notifyWarning=r;function n(e,r,n){toastr.success(e,r,t(n))}e.notifySuccess=n;function a(e,r,n){toastr.info(e,r,t(n))}e.notifyInfo=a;function i(e,r,n){toastr.error(e,r,t(n))}e.notifyError=i;function o(e){if(typeof toastr==="undefined"){return}var t=$(window.document.body).children(".ui-dialog:visible, .modal.in, .modal.show").last();var r=toastr.getContainer(null,e);if(r.length===0){return}if(t.length>0){var n=t.position();r.addClass("positioned-toast toast-top-full-width");r.css({position:"absolute",top:n.top+28+"px",left:n.left+6+"px",width:t.width()-12+"px"})}else{r.addClass("toast-top-full-width");if(r.hasClass("positioned-toast")){r.removeClass("positioned-toast");r.css({position:"",top:"",left:"",width:""})}}}e.positionToastContainer=o})(Q||(Q={}));var Q;(function(e){var t;(function(t){function r(t){var r;if(t==null){r="??ERROR??"}else{r=t.Message;if(r==null){r=t.Code}}e.alert(r)}t.showServiceError=r;function n(t,r,n,a,i){try{var o=(window.location.host||"").toLowerCase();if(o.indexOf("localhost")<0&&o.indexOf("127.0.0.1")<0)return;if(!window["toastr"])return;var u=JSON.stringify(i||{});t="<p></p><p>Message: "+e.htmlEncode(t)+"</p><p>File: "+e.htmlEncode(r)+", Line: "+n+", Column: "+a+(u!="{}"?"</p><p>Error: ":"")+"</p>";window.setTimeout(function(){try{e.notifyError(t,"SCRIPT ERROR! See browser console (F12) for details.",{escapeHtml:false,timeOut:15e3})}catch(r){}})}catch(l){}}t.runtimeErrorHandler=n})(t=e.ErrorHandling||(e.ErrorHandling={}))})(Q||(Q={}));var Q;(function(e){var t;(function(e){e.applicationPath="/";if(typeof document!=="undefined"){var t=document.querySelector("link#ApplicationPath");if(t!=null){e.applicationPath=t.getAttribute("href")}}e.emailAllowOnlyAscii=true;e.responsiveDialogs=false;e.bootstrapMessages=false;e.rootNamespaces=["Serenity"];e.notLoggedInHandler=null})(t=e.Config||(e.Config={}))})(Q||(Q={}));var Q;(function(e){function t(e){if($.cookie)return $.cookie(e);e+="=";for(var t=document.cookie.split(/;\s*/),r=t.length-1;r>=0;r--)if(!t[r].indexOf(e))return t[r].replace(e,"")}e.getCookie=t;typeof $!="undefined"&&$.ajaxSetup&&$.ajaxSetup({beforeSend:function(t){var r=e.getCookie("CSRF-TOKEN");if(r)t.setRequestHeader("X-CSRF-TOKEN",r)}});function r(t){var r=function(r){if(e.Config.notLoggedInHandler!=null&&r&&r.Error&&r.Error.Code=="NotLoggedIn"&&e.Config.notLoggedInHandler(t,r)){return}if(t.onError!=null){t.onError(r);return}e.ErrorHandling.showServiceError(r.Error)};var n=t.service;if(n&&n.length&&n.charAt(0)!="~"&&n.charAt(0)!="/"&&n.indexOf("://")<0)n=l("~/services/")+n;t=e.extend({dataType:"json",contentType:"application/json",type:"POST",cache:false,blockUI:true,url:n,data:$.toJSON(t.request),success:function(r,n,a){try{if(!r.Error&&t.onSuccess){t.onSuccess(r)}}finally{if(t.blockUI){e.blockUndo()}t.onCleanup&&t.onCleanup()}},error:function(n,a,i){try{if(n.status===403){var o=null;try{o=n.getResponseHeader("Location")}catch(u){o=null}if(o){window.top.location.href=o;return}}if((n.getResponseHeader("content-type")||"").toLowerCase().indexOf("application/json")>=0){var l=$.parseJSON(n.responseText);if(l&&l.Error){r(l);return}}var s=n.responseText;if(!s){if(!n.status){if(n.statusText!="abort")e.alert("An unknown AJAX connection error occurred! Check browser console for details.")}else if(n.status==500)e.alert("HTTP 500: Connection refused! Check browser console for details.");else e.alert("HTTP "+n.status+" error! Check browser console for details.")}else e.iframeDialog({html:s})}finally{if(t.blockUI){e.blockUndo()}t.onCleanup&&t.onCleanup()}}},t);if(t.blockUI){e.blockUI(null)}return $.ajax(t)}e.serviceCall=r;function n(t,n,a,i){return r(e.extend({service:t,request:n,onSuccess:a},i))}e.serviceRequest=n;function a(e,t,r){if(e.EqualityFilter==null){e.EqualityFilter={}}e.EqualityFilter[t]=r}e.setEquality=a;function i(e){var t;if(e===undefined)t=location.search.substring(1,location.search.length);else t=e||"";var r={};var n=t.split("&");for(var a=0;a<n.length;a++){var i=n[a].split("=");var o=decodeURIComponent(i[0]);r[o]=i.length>=2?decodeURIComponent(i[1]):o}return r}e.parseQueryString=i;function o(t){var r=$("<form/>").attr("method","POST").attr("action",t.url?l(t.url):l("~/services/"+t.service)).appendTo(document.body);if(t.target)r.attr("target",t.target);var n=$("<div/>").appendTo(r);$("<input/>").attr("type","hidden").attr("name","request").val($["toJSON"](t.request)).appendTo(n);var a=e.getCookie("CSRF-TOKEN");if(a){$("<input/>").attr("type","hidden").attr("name","__RequestVerificationToken").appendTo(n).val(a)}$("<input/>").attr("type","submit").appendTo(n);r.submit();window.setTimeout(function(){r.remove()},0)}e.postToService=o;function u(t){var r=$("<form/>").attr("method","POST").attr("action",l(t.url)).appendTo(document.body);if(t.target)r.attr("target",t.target);var n=$("<div/>").appendTo(r);if(t.params!=null){for(var a in t.params){$("<input/>").attr("type","hidden").attr("name",a).val(t.params[a]).appendTo(n)}}var i=e.getCookie("CSRF-TOKEN");if(i){$("<input/>").attr("type","hidden").attr("name","__RequestVerificationToken").appendTo(n).val(i)}$("<input/>").attr("type","submit").appendTo(n);r.submit();window.setTimeout(function(){r.remove()},0)}e.postToUrl=u;function l(t){if(t&&t.substr(0,2)==="~/"){return e.Config.applicationPath+t.substr(2)}return t}e.resolveUrl=l})(Q||(Q={}));var Q;(function(e){var t;(function(t){var r={};var n={};function a(e,t,r){$(document.body).bind("scriptdatachange."+t,function(t,n){if(n==e){r()}})}t.bindToChange=a;function i(e){$(document.body).triggerHandler("scriptdatachange",[e])}t.triggerChange=i;function o(e){$(document.body).unbind("scriptdatachange."+e)}t.unbindFromChange=o;function u(t,n){return{async:n,cache:true,type:"GET",url:e.resolveUrl("~/DynJS.axd/")+t+".js?"+r[t],data:null,dataType:"text",converters:{"text script":function(e){return e}},success:function(e,t,r){$.globalEval(e)},error:function(r,n,a){var i=e.startsWith(t,"Lookup.");if(r.status==403&&i){e.notifyError('<p>Access denied while trying to load the lookup: "<b>'+t.substr(7)+'</b>". Please check if current user has required permissions for this lookup.</p> '+"<p><em>Lookups use the ReadPermission of their row by default. You may override that for the lookup "+'like [LookupScript("Some.Lookup", Permission = "?")] to grant all '+'authenticated users to read it (or use "*" for public).</em></p>'+"<p><em>Note that this might be a security risk if the lookup contains sensitive data, "+'so it could be better to set a separate permission for lookups, like "MyModule:Lookups".</em></p>',null,{timeOut:1e4,escapeHtml:false});return}e.notifyError("An error occurred while trying to load "+(i?' the lookup: "'+t.substr(7):' dynamic script: "'+t)+'"!. Please check the error message displayed in the dialog below for more info.');var o=r.responseText;if(!o){if(!r.status)e.alert("An unknown connection error occurred! Check browser console for details.");else if(r.status==500)e.alert("HTTP 500: Connection refused! Check browser console for details.");else e.alert("HTTP "+r.status+" error! Check browser console for details.")}else e.iframeDialog({html:o})}}}function l(t){return Promise.resolve().then(function(){e.blockUI(null);return Promise.resolve($.ajax(u(t,true)).always(function(){e.blockUndo()}))},null)}function s(t){if(r[t]==null){throw new Error(e.format("Script data {0} is not found in registered script list!",t))}$.ajax(u(t,false))}function f(t){return Promise.resolve().then(function(){if(r[t]==null){throw new Error(e.format("Script data {0} is not found in registered script list!",t))}return l(t)},null)}function c(t){var r=n[t];if(r==null){s(t)}r=n[t];if(r==null)throw new Error(e.format("Can't load script data: {0}!",t));return r}t.ensure=c;function d(t){return Promise.resolve().then(function(){var r=n[t];if(r!=null){return Promise.resolve(r)}return f(t).then(function(){r=n[t];if(r==null){throw new Error(e.format("Can't load script data: {0}!",t))}return r},null)},null)}t.ensureAsync=d;function p(t){if(r[t]==null){throw new Error(e.format("Script data {0} is not found in registered script list!",t))}r[t]=(new Date).getTime().toString();s(t);var a=n[t];return a}t.reload=p;function h(t){return Promise.resolve().then(function(){if(r[t]==null){throw new Error(e.format("Script data {0} is not found in registered script list!",t))}r[t]=(new Date).getTime().toString();return f(t).then(function(){return n[t]},null)},null)}t.reloadAsync=h;function g(e){return n[e]!=null||r[e]!=null}t.canLoad=g;function v(e){r={};var t=(new Date).getTime();for(var n in e){r[n]=e[n]||t}}t.setRegisteredScripts=v;function m(e,t){n[e]=t;i(e)}t.set=m})(t=e.ScriptData||(e.ScriptData={}));function r(e){return t.ensure("RemoteData."+e)}e.getRemoteData=r;function n(e){return t.ensureAsync("RemoteData."+e)}e.getRemoteDataAsync=n;function a(r){var n="Lookup."+r;if(!t.canLoad(n)){var a='No lookup with key "'+r+'" is registered. Please make sure you have a'+' [LookupScript("'+r+'")] attribute in server side code on top of a row / custom lookup and '+" its key is exactly the same.";e.notifyError(a);throw new Error(a)}return t.ensure("Lookup."+r)}e.getLookup=a;function i(e){return t.ensureAsync("Lookup."+e)}e.getLookupAsync=i;function o(e){t.reload("Lookup."+e)}e.reloadLookup=o;function u(e){return t.reloadAsync("Lookup."+e)}e.reloadLookupAsync=u;function l(e){return t.ensure("Columns."+e)}e.getColumns=l;function s(e){return t.ensureAsync("Columns."+e)}e.getColumnsAsync=s;function f(e){return t.ensure("Form."+e)}e.getForm=f;function c(e){return t.ensureAsync("Form."+e)}e.getFormAsync=c;function d(e){return t.ensure("Template."+e)}e.getTemplate=d;function p(e){return t.ensureAsync("Template."+e)}e.getTemplateAsync=p;function h(e){return t.canLoad(e)}e.canLoadScriptData=h})(Q||(Q={}));var Q;(function(e){if(typeof $!=="undefined"&&$.validator&&$.validator.methods&&$.validator.addMethod){$.validator.addMethod("customValidate",function(e,t){var r=this.optional(t);if(t==null||!!r){return r}var n=$._data(t,"events");if(!n){return true}var a=n.customValidate;if(a==null||a.length===0){return true}var i=$(t);for(var o=0;!!(o<a.length);o++){if($.isFunction(a[o].handler)){var u=a[o].handler(i);if(u!=null){i.data("customValidationMessage",u);return false}}}return true},function(e,t){return $(t).data("customValidationMessage")});$.validator.addMethod("dateQ",function(t,r){var n=this.optional(r);if(n)return n;var a=e.parseDate(t);if(!a)return false;var i=new Date(a);i.setHours(0,0,0,0);return i.getTime()===a.getTime()});$.validator.addMethod("dateTimeQ",function(t,r){var n=this.optional(r);if(n)return n;var a=e.parseDate(t);return!!a});$.validator.addMethod("hourAndMin",function(t,r){return this.optional(r)||!isNaN(e.parseHourAndMin(t))});$.validator.addMethod("dayHourAndMin",function(t,r){return this.optional(r)||!isNaN(e.parseDayHourAndMin(t))});$.validator.addMethod("decimalQ",function(t,r){return this.optional(r)||!isNaN(e.parseDecimal(t))});$.validator.addMethod("integerQ",function(t,r){return this.optional(r)||!isNaN(e.parseInteger(t))});var t=$.validator.methods["email"];var r=null;$.validator.addMethod("email",function(n,a){if(e.Config.emailAllowOnlyAscii)return t.call(this,n,a);if(r==null)r=new RegExp("^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|"+"[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|"+"((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|"+"\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])"+"([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)"+"+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|"+"[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$","i");return r.test(n)});function n(t,r){var n=e.tryGetText("Validation."+r);if(n)$.validator.messages[t]=n;else if(!$.validator.messages[t])$.validator.messages[t]=r+"?"}n("required","Required");n("email","Email");n("minlength","MinLength");n("maxlength","MaxLength");n("digits","Digits");n("range","Range");n("xss","Xss");n("dateQ","DateInvalid");n("decimalQ","Decimal");n("integerQ","Integer");n("url","Url")}function a(t,r){if(e.isBS3())t.attr("data-original-title",r||"").tooltip("fixTitle");else t.attr("title",r||"").tooltip("_fixTitle");return t}function i(){return{errorClass:"error",ignore:":hidden, .no-validate",ignoreTitle:true,normalizer:function(e){return $.trim(e)},highlight:function(e,t,r){if(e.type==="radio"){this.findByName(e.name).addClass(t).removeClass(r)}else{var n=$(e);n.addClass(t).removeClass(r);if(n.hasClass("select2-offscreen")&&e.id){$("#s2id_"+e.id).addClass(t).removeClass(r)}}},unhighlight:function(e,t,r){if(e.type==="radio"){this.findByName(e.name).removeClass(t).addClass(r)}else{var n=$(e);n.removeClass(t).addClass(r);if(n.hasClass("select2-offscreen")&&e.id){$("#s2id_"+e.id).removeClass(t).addClass(r)}}},showErrors:function(e,t){var r=this;$.each(this.validElements(),function(e,t){var n=$(t);n.removeClass(r.settings.errorClass).addClass(r.settings.validClass);if(n.hasClass("select2-offscreen")&&n.id){n=$("#s2id_"+t.id).removeClass(r.settings.errorClass).addClass(r.settings.validClass);if(!n.length)n=$(t)}a(n,"").tooltip("hide")});$.each(t,function(e,t){var n=$(t.element).addClass(r.settings.errorClass);if(n.hasClass("select2-offscreen")&&t.element.id){n=$("#s2id_"+t.element.id).addClass(r.settings.errorClass);if(!n.length)n=$(t.element)}a(n,t.message);if(e==0)n.tooltip("show")})}}}e.baseValidateOptions=i;function o(t,r){return t.validate(e.extend(e.baseValidateOptions(),r))}e.validateForm=o;function u(t,r,n){if(!t.length)return t;if(n==null)throw new e.Exception("rule is null!");t.addClass("customValidate").bind("customValidate."+r,n);return t}e.addValidationRule=u;function l(e,t){e.unbind("customValidate."+t);return e}e.removeValidationRule=l})(Q||(Q={}));var Q;(function(e){var t;(function(t){function r(e){if(e==null)return false;if(e=="*")return true;if(e==""||e=="?")return t.isLoggedIn;var r=t.userDefinition;if(r&&r.IsAdmin)return true;if(r&&r.Permissions){var n=r.Permissions;if(n[e])return true;var a=e.split("|");for(var i=0,o=a;i<o.length;i++){var u=o[i];if(!u)continue;var l=u.split("&");if(!l.length)continue;var s=false;for(var f=0,c=l;f<c.length;f++){var d=c[f];if(!n[d]){s=true;break}}if(!s)return true}}return false}t.hasPermission=r;function n(t){if(!r(t)){e.notifyError(e.text("Authorization.AccessDenied"));throw new Error(e.text("Authorization.AccessDenied"))}}t.validatePermission=n})(t=e.Authorization||(e.Authorization={}));Object.defineProperty(e.Authorization,"userDefinition",{get:function(){return e.getRemoteData("UserData")}});Object.defineProperty(e.Authorization,"isLoggedIn",{get:function(){var e=t.userDefinition;return e&&!!e.Username}});Object.defineProperty(e.Authorization,"username",{get:function(){var e=t.userDefinition;if(e)return e.Username;return null}})})(Q||(Q={}));var Q;(function(e){var t;(function(e){var t;var r=0;var n=0;var a={};function i(){if(t==null&&n>0){t=window.setTimeout(u,100)}}function o(){if(t!=null){window.clearTimeout(t);t=null}}function u(){for(var e in a){var t=a[e];try{var r=t.element();if(!r)continue;var n=r.offsetWidth;var u=r.offsetHeight;try{if(t.width&&t.storedWidth!==n||t.height&&t.storedHeight!==u||!t.width&&!t.height&&(!n!==!t.storedWidth||!u!==!t.storedHeight)){if(n>0&&u>0){try{t.handler()}finally{n=r.offsetWidth;u=r.offsetHeight}}}}finally{t.storedWidth=n;t.storedHeight=u}}catch(l){console.log(l)}}o();i()}function l(e){var t=a[e];if(!t)return;var r=t.element();if(!r)return;t.storedWidth=r.offsetWidth;t.storedHeight=r.offsetHeight}e.store=l;function s(e){var t=a[e];if(!t)return;l(e);if(t.storedWidth>=0&&t.storedHeight>=0){t.handler()}l(e)}e.trigger=s;function f(e,t,o,u){if(t==null)throw"Layout handler can't be null!";a[++r]={element:e,handler:t,width:o!==false,height:u!==false};n++;l(r);i();return r}e.onSizeChange=f;function c(e,t){return f(e,t,true,false)}e.onWidthChange=c;function d(e,t){return f(e,t,false,true)}e.onHeightChange=d;function p(e,t){return f(e,t,false,false)}e.onShown=p;function h(e){var t=a[e];if(!t)return 0;delete a[e];n--;if(n<=0)o();return 0}e.off=h})(t=e.LayoutTimer||(e.LayoutTimer={}))})(Q||(Q={}));var Serenity;(function(e){function t(e){return[e]}e.Criteria=t;(function(e){var t=e;function r(e){return e==null||e.length===0||e.length===1&&typeof e[0]=="string"&&e[0].length===0}e.isEmpty=r;function n(e,r,n){if(t.isEmpty(e))return n;if(t.isEmpty(n))return e;return[e,r,n]}e.join=n;function a(e){return t.isEmpty(e)?e:["()",e]}e.paren=a;function i(e,t){var r=[];for(var a=2;a<arguments.length;a++){r[a-2]=arguments[a]}var i=n(e,"and",t);if(r){for(var o=0,u=r;o<u.length;o++){var l=u[o];i=n(i,"and",l)}}return i}e.and=i;function o(e,t){var r=[];for(var a=2;a<arguments.length;a++){r[a-2]=arguments[a]}var i=n(e,"or",t);if(r){for(var o=0,u=r;o<u.length;o++){var l=u[o];i=n(i,"or",l)}}return i}e.or=o})(t=e.Criteria||(e.Criteria={}))})(Serenity||(Serenity={}));var Serenity;(function(e){var t;(function(e){e[e["Disabled"]=-1]="Disabled";e[e["None"]=0]="None";e[e["Sum"]=1]="Sum";e[e["Avg"]=2]="Avg";e[e["Min"]=3]="Min";e[e["Max"]=4]="Max"})(t=e.SummaryType||(e.SummaryType={}))})(Serenity||(Serenity={}));typeof module!=="undefined"&&(module.exports={Q:Q,Serenity:Serenity,__extends:__extends});