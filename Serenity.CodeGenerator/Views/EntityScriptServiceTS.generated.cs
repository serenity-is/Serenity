#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Serenity.CodeGenerator.Views
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    public partial class EntityScriptServiceTS : RazorGenerator.Templating.RazorTemplateBase
    {
#line hidden
 public dynamic Model { get; set; } 
        public override void Execute()
        {


WriteLiteral(Environment.NewLine);



                                                   
    var dotModule = Model.Module == null ? "" : ("." + Model.Module);
    var modulePrefix = (Model.Module == null ? "" : (Model.Module + "/"));

    Func<string, string, string> jf = (x, y) =>
    {
        if (x.ToLowerInvariant() == y.ToLowerInvariant())
            return y;
        else
            return x + y;
    };

    var fields = (IEnumerable<EntityField>)Model.Fields;
    var joins = (IEnumerable<EntityJoin>)Model.Joins;
    var fieldList = String.Join(", ", fields.Select(x => "'" + x.Ident + "'").Concat(joins.SelectMany(x => x.Fields.Select(y => "'" + jf(x.Name, y.Ident) + "'"))));


WriteLiteral(Environment.NewLine + "namespace ");


      Write(Model.RootNamespace);


                            Write(dotModule);

WriteLiteral(" {" + Environment.NewLine + "    export namespace ");


                 Write(Model.ClassName);

WriteLiteral("Service {" + Environment.NewLine + "        export const baseUrl = \'");


                            Write(modulePrefix);


                                           Write(Model.ClassName);

WriteLiteral("\';" + Environment.NewLine + Environment.NewLine + "        export declare function Create(request: Serenity.SaveRequest<");


                                                                 Write(Model.RowClassName);

WriteLiteral(">, onSuccess?: (response: Serenity.SaveResponse) => void, opt?: Serenity.ServiceO" +
"ptions<any>): JQueryXHR;" + Environment.NewLine + "        export declare function Update(request: Sereni" +
"ty.SaveRequest<");


                                                                 Write(Model.RowClassName);

WriteLiteral(@">, onSuccess?: (response: Serenity.SaveResponse) => void, opt?: Q.ServiceOptions<any>): JQueryXHR;
        export declare function Delete(request: Serenity.DeleteRequest, onSuccess?: (response: Serenity.DeleteResponse) => void, opt?: Q.ServiceOptions<any>): JQueryXHR;
        export declare function Retrieve(request: Serenity.RetrieveRequest, onSuccess?: (response: Serenity.RetrieveResponse<");


                                                                                                                         Write(Model.RowClassName);

WriteLiteral(">) => void, opt?: Q.ServiceOptions<any>): JQueryXHR;" + Environment.NewLine + "        export decla" +
"re function List(request: Serenity.ListRequest, onSuccess?: (response: Serenity." +
"ListResponse<");


                                                                                                             Write(Model.RowClassName);

WriteLiteral(@">) => void, opt?: Q.ServiceOptions<any>): JQueryXHR;

        export namespace Methods {
            export declare const Create: string;
            export declare const Update: string;
            export declare const Delete: string;
            export declare const Retrieve: string;
            export declare const List: string;
        }

        ['Create', 'Update', 'Delete', 'Retrieve', 'List'].forEach(x => {
            (<any>");


              Write(Model.ClassName);

WriteLiteral("Service)[x] = function (r, s, o) { return Q.serviceRequest(baseUrl + \'/\' + x, r, " +
"s, o); };" + Environment.NewLine + "            (<any>Methods)[x] = baseUrl + \'/\' + x;" + Environment.NewLine + "        });" + Environment.NewLine + "    " +
"}" + Environment.NewLine + "}");


        }
    }
}
#pragma warning restore 1591
