var Q;(function(t){var e;function i(t,i){e.call(this,t,i);this.errorsFor(t).each(function(e,i){if($(t).hasClass("error"))$(i).removeClass("checked");$(i).attr("title",$(i).text())})}function a(){Serenity.CustomValidation.registerValidationMethods();var a=$.validator;a=a.prototype;e=a.showLabel;a.showLabel=i;jQuery.validator.addMethod("xss",function(t,e){if(t.length==0)return true;var i=0;while(true){var a=t.indexOf("&",i);if(a<0)a=t.indexOf("<",i);if(a<0)return true;if(a==t.length-1)return true;var n=t.charAt(a);var r=t.charAt(a+1);if(n!="&"){if(n=="<"&&(r>="a"&&r<="z"||r>="A"&&r<="Z"||r=="!"||r=="/"))return false}else if(r=="#")return false;i=a+1}});$.validator.addMethod("dateQ",function(e,i){return this.optional(i)||t.parseDate(e)!=false});$.validator.addMethod("hourAndMin",function(e,i){return this.optional(i)||!isNaN(t.parseHourAndMin(e))});$.validator.addMethod("dayHourAndMin",function(e,i){return this.optional(i)||!isNaN(t.parseDayHourAndMin(e))});$.validator.addMethod("decimalQ",function(e,i){return this.optional(i)||!isNaN(t.parseDecimal(e))});$.validator.addMethod("integerQ",function(e,i){return this.optional(i)||!isNaN(t.parseInteger(e))});var n=$.validator.methods["email"];$.validator.addMethod("email",function(e,i){if(!t.Config.emailAllowOnlyAscii)return n.call(this,e,i);return this.optional(i)||/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)});$.validator.addMethod("emailMultiple",function(t,e){var i=this.optional(e);if(i)return i;if(t.indexOf(";")>=0)t=t.split(";");else t=t.split(",");for(var a=0;a<t.length;a++){i=$.validator.methods["email"].call(this,t[a],e);if(!i)return i}return i});$.validator.addMethod("anyvalue",function(t,e){return true});var r=$.validator.defaults;r.ignoreTitle=true;r.onchange=function(t){this.element(t)};a.oldinit=a.init;a.init=function(){a.oldinit.call(this);function t(t){if(this.form==null)return;var e=$.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,"");e&&e.settings[i]&&e.settings[i].call(e,this)}function e(e){var i=this[0];if(!$.data(i,"changebound")){$(i).change(t);$.data(i,"changebound",true)}}$(this.currentForm).on(":text, :password, :file, select, textarea","focusin.validate",e)};a.oldfocusInvalid=a.focusInvalid;a.focusInvalid=function(){if(this.settings.abortHandler)this.settings.abortHandler(this);this.oldfocusInvalid.call(this)};a.oldstopRequest=a.focusInvalid;a.stopRequest=function(t,e){var i=this.formSubmitted;this.oldfocusInvalid.call(this,[t,e]);if(!e&&this.pendingRequest==0&&i&&this.settings.abortHandler){this.settings.abortHandler(this)}};a.resetAll=function(){this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)};jQuery(function(){$.extend($.validator.messages,{email:t.text("Validation.Email"),required:t.text("Validation.Required"),minlength:t.text("Validation.MinLength"),maxlength:t.text("Validation.MaxLength"),digits:t.text("Validation.Digits"),range:t.text("Validation.Range"),xss:t.text("Validation.Xss"),dateQ:t.text("Validation.DateInvalid"),decimalQ:t.text("Validation.Decimal"),integerQ:t.text("Validation.Integer"),url:t.text("Validation.Url")})})}function n(t){t.settings.abortHandler=null;t.settings.submitHandler=function(){return false}}t.validatorAbortHandler=n;function r(e){return $.extend({ignore:":hidden",meta:"v",errorClass:"error",errorPlacement:function(t,e){var i=null;var a=e.attr("data-vx-id");if(a){i=$("#"+a);if(!i.length)i=null;else i=i[0]}if(i==null){i=e.parents("div.field");if(i.length){var n=$("div.vx",i[0]);if(n.length)i=n[0]}else i=e.parent()}t.appendTo(i)},submitHandler:function(){return false},invalidHandler:function(){t.notifyError(t.text("Validation.InvalidFormMessage"))},success:function(t){t.addClass("checked")}},e)}t.validateOptions=r;if(window["jQuery"]&&window["jQuery"]["validator"])a();else if(window["jQuery"]){jQuery(function(t){if(t.validator)a()})}function o(){var e=t.Culture.dateOrder;var i=t.Culture.dateSeparator;var a=($("html").attr("lang")||"en").toLowerCase();if(!$.datepicker.regional[a]){a=a.split("-")[0];if(!$.datepicker.regional[a]){a="en"}}$.datepicker.setDefaults($.datepicker.regional["en"]);$.datepicker.setDefaults($.datepicker.regional[a]);$.datepicker.setDefaults({dateFormat:e=="mdy"?"mm"+i+"dd"+i+"yy":e=="ymd"?"yy"+i+"mm"+i+"dd":"dd"+i+"mm"+i+"yy",buttonImage:t.resolveUrl("~/content/serenity/images/datepicker.png"),buttonImageOnly:true,showOn:"both",showButtonPanel:true,changeMonth:true,changeYear:true})}if(window["jQuery"]&&window["jQuery"]["datepicker"]&&window["jQuery"]["datepicker"]["regional"]&&window["jQuery"]["datepicker"]["regional"]["en"]){o()}else{jQuery(function(t){if(t.datepicker)o()})}function l(){$.ui.dialog.prototype._allowInteraction=function(t){if($(t.target).closest(".ui-dialog").length){return true}return!!$(t.target).closest(".ui-datepicker, .select2-drop, .cke, .cke_dialog, #support-modal").length}}if(window["jQuery"]&&window["jQuery"]["ui"]){l()}else{jQuery(function(t){if(window["jQuery"]["ui"])l()})}function s(){ss.Exception.prototype.toString=function(){return this.get_message()}}if(ss&&ss.Exception)s();else{jQuery(function(t){if(ss&&ss.Exception)s()})}})(Q||(Q={}));